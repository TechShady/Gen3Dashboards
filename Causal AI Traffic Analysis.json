{"version":11,"variables":[{"key":"AppName","type":"code","input":"import { rumUserSessionsClient } from \"@dynatrace-sdk/client-classic-environment-v1\";\nexport default async function () {\n const lastXDays = 1;\n const usqlQuery = 'SELECT DISTINCT application FROM useraction';\n const response = await rumUserSessionsClient.getUsqlResultAsTable({query: usqlQuery, startTimestamp: Date.now() - lastXDays * 24 * 60 * 60 * 1000});\n const sampleCount = response.values.length;\n function flatten(arr) {\n    var flat = [];\n    for (var i = 0; i < sampleCount; i++) {\n        flat = flat.concat(arr[i]);\n    }\n    return flat;\n}\n return( flatten(response.values))\n}","multiple":true},{"key":"TrafficChangePercent","type":"csv","input":"5,10,20,25,50,100,150,200,250,300,350,400,450,500","multiple":false},{"key":"ActionType","type":"csv","input":"All,Key,Entry,Exit","multiple":false}],"tiles":{"0":{"type":"code","title":"Traffic vs Duration","input":"import { rumUserSessionsClient } from \"@dynatrace-sdk/client-classic-environment-v1\";\nexport default async function () {\n  const startTime = Date.parse($dt_timeframe_from).toString();  // Get Dashboard Start Time\n  const endTime = Date.parse($dt_timeframe_to).toString();      // Get Dashboard End Time\n  // Calculate Chart Interval\n  const timeDiff = (endTime-startTime)/3600/1000/24;\n  var chartInterval = \"1m\"\n  var appsList = \"\\\"\"+$AppName[0]+\"\\\"\";\n  let i = 1;\n  // Build Apps List\n  while (i < 10) {\n    if ($AppName[i]==null) break;\n    appsList = appsList+\",\\\"\"+$AppName[i]+\"\\\"\";\n    i++;\n  }\n  var usqlQuery = 'SELECT DISTINCT DATETIME(endTime,  \"MM-dd HH:mm:ss\",\"'+chartInterval+'\") AS \"Date\", count(*) AS \"Count\", avg(duration) AS \"Duration\" from useraction WHERE useraction.application in ('+appsList+') and usersession.starttime>='+startTime+' and usersession.endtime<='+endTime+' limit 5000';\n  if ($ActionType==\"Key\") usqlQuery = 'SELECT DISTINCT DATETIME(endTime,  \"MM-dd HH:mm:ss\",\"'+chartInterval+'\") AS \"Date\", count(*) AS \"Count\", avg(duration) AS \"Duration\" from useraction WHERE useraction.application in ('+appsList+') and usersession.starttime>='+startTime+' and usersession.endtime<='+endTime+' and keyuseraction is true limit 5000';\n  if ($ActionType==\"Entry\") usqlQuery = 'SELECT DISTINCT DATETIME(endTime,  \"MM-dd HH:mm:ss\",\"'+chartInterval+'\") AS \"Date\", count(*) AS \"Count\", avg(duration) AS \"Duration\" from useraction WHERE useraction.application in ('+appsList+') and usersession.starttime>='+startTime+' and usersession.endtime<='+endTime+' and isentryaction is true  limit 5000';\n  if ($ActionType==\"Exit\") usqlQuery = 'SELECT DISTINCT DATETIME(endTime,  \"MM-dd HH:mm:ss\",\"'+chartInterval+'\") AS \"Date\", count(*) AS \"Count\", avg(duration) AS \"Duration\" from useraction WHERE useraction.application in ('+appsList+') and usersession.starttime>='+startTime+' and usersession.endtime<='+endTime+' and isexitaction is true limit 5000';\n  const response = await rumUserSessionsClient.getUsqlResultAsTable({query: usqlQuery, startTimestamp: startTime, endTimestamp: endTime});\n  const sampleCount = response.values.length-5;\n  return {\n    records: new Array(sampleCount).fill(null).map((_, index, array) => {\n      return {\n        Date: response.values[index][0],\n        'Traffic': response.values[index][1],\n        'Duration': response.values[index][2]/1000      };\n    }),\n    types: [\n      {\n        indexRange: [0, sampleCount],\n        mappings: {\n         Date: { type: 'timestamp' },\n          'Traffic': { type: 'double' },\n          'Duration': { type: 'double' }\n        },\n      },\n    ],\n  };\n}","visualization":"lineChart","visualizationSettings":{"thresholds":[{"id":1,"field":"","title":"","isEnabled":true,"rules":[{"id":0,"color":{"Default":"var(--dt-colors-charts-categorical-color-09-default, #649438)"},"comparator":"≥","label":""},{"id":1,"color":{"Default":"var(--dt-colors-charts-categorical-color-14-default, #d56b1a)"},"comparator":"≥","label":""},{"id":2,"color":{"Default":"var(--dt-colors-charts-categorical-color-12-default, #cd3741)"},"comparator":"≥","label":""}]}],"chartSettings":{"gapPolicy":"connect","circleChartSettings":{"groupingThresholdType":"relative","groupingThresholdValue":0,"valueType":"relative"},"categoryOverrides":{},"legend":{"position":"bottom","hidden":false},"seriesOverrides":[{"seriesId":["Traffic"],"override":{"color":{"Default":"var(--dt-colors-charts-categorical-color-01-default, #134fc9)"}}},{"seriesId":["Duration"],"override":{"color":{"Default":"var(--dt-colors-charts-categorical-color-03-default, #2a7453)"}}}]},"singleValue":{"showLabel":true,"label":"","prefixIcon":"","autoscale":true,"alignment":"center"},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"lineWrapIds":[],"columnWidths":{}},"unitsOverrides":[{"identifier":"Diff","unitCategory":"unspecified","baseUnit":"none","displayUnit":null,"decimals":2,"suffix":"","delimiter":false,"added":1701281148734}]}},"2":{"type":"code","title":"Duration Impact (ms)","input":"import { rumUserSessionsClient } from \"@dynatrace-sdk/client-classic-environment-v1\";\nexport default async function () {\n  const metric = \"duration\";\n  const metricName = \"Avg Duration\";\n  const startTime = Date.parse($dt_timeframe_from).toString();  // Get Dashboard Start Time\n  const endTime = Date.parse($dt_timeframe_to).toString();      // Get Dashboard End Time\n  // Calculate Chart Interval\n  const timeDiff = (endTime-startTime)/3600/1000/24;\n  var chartInterval = \"1m\"\n  var appsList = \"\\\"\"+$AppName[0]+\"\\\"\";\n  let i = 1;\n  // Build Apps List\n  while (i < 10) {\n    if ($AppName[i]==null) break;\n    appsList = appsList+\",\\\"\"+$AppName[i]+\"\\\"\";\n    i++;\n  }\n  var usqlQuery = 'SELECT DISTINCT DATETIME(endTime,  \"MM-dd HH:mm:ss\",\"'+chartInterval+'\") AS \"Date\", count(*) AS \"Count\", avg('+metric+') AS \"Metric\" from useraction WHERE useraction.application in ('+appsList+') and usersession.starttime>='+startTime+' and usersession.endtime<='+endTime+' limit 5000';\n  if ($ActionType==\"Key\") usqlQuery = 'SELECT DISTINCT DATETIME(endTime,  \"MM-dd HH:mm:ss\",\"'+chartInterval+'\") AS \"Date\", count(*) AS \"Count\", avg('+metric+') AS \"Metric\" from useraction WHERE useraction.application in ('+appsList+') and usersession.starttime>='+startTime+' and usersession.endtime<='+endTime+' and keyuseraction is true limit 5000';\n  if ($ActionType==\"Entry\") usqlQuery = 'SELECT DISTINCT DATETIME(endTime,  \"MM-dd HH:mm:ss\",\"'+chartInterval+'\") AS \"Date\", count(*) AS \"Count\", avg('+metric+') AS \"Metric\" from useraction WHERE useraction.application in ('+appsList+') and usersession.starttime>='+startTime+' and usersession.endtime<='+endTime+' and isentryaction is true  limit 5000';\n  if ($ActionType==\"Exit\") usqlQuery = 'SELECT DISTINCT DATETIME(endTime,  \"MM-dd HH:mm:ss\",\"'+chartInterval+'\") AS \"Date\", count(*) AS \"Count\", avg('+metric+') AS \"Metric\" from useraction WHERE useraction.application in ('+appsList+') and usersession.starttime>='+startTime+' and usersession.endtime<='+endTime+' and isexitaction is true limit 5000';\n  const response = await rumUserSessionsClient.getUsqlResultAsTable({query: usqlQuery, startTimestamp: startTime, endTimestamp: endTime});\n  if (response.values.length<6) return \"Try increasing the timeframe.\";\n  const sampleCount = response.values.length-5;\n  let percentChangeMetric = 0;\n  let percentChangeTraffic = 0;\n  let trafficAVG = 0;\n  let metricAVG = 0;\n  let metricAAVG = 0;\n  let metricBAVG = 0;\n  let trafficAAVG = 0;\n  let trafficBAVG = 0;\n  let c = 0;\n  while (c < sampleCount) {\n    trafficAVG = trafficAVG + response.values[c][1];\n    metricAVG = metricAVG + response.values[c][2];\n    c++;\n  }\n  let i2 = 0;\n  let i2A = 0;\n  let i2B = 0;\n  while (i2 < sampleCount) {\n    if (response.values[i2][1]>(trafficAVG/sampleCount))\n      {\n        metricAAVG=metricAAVG+response.values[i2][2];\n        trafficAAVG=trafficAAVG+response.values[i2][1];\n        i2A++;\n      }\n    if (response.values[i2][1]<(trafficAVG/sampleCount)) \n      {\n        metricBAVG=metricBAVG+response.values[i2][2];\n        trafficBAVG=trafficBAVG+response.values[i2][1];\n        i2B++;\n      }\n    i2++;\n  }\n  percentChangeMetric = (Number(metricAAVG/i2A) - Number(metricBAVG/i2B))/Number(metricBAVG/i2B)*100;\n  percentChangeTraffic = (Number(trafficAAVG/i2A) - Number(trafficBAVG/i2B))/Number(trafficBAVG/i2B)*100;\n  let newChangeMetric = (percentChangeMetric+((percentChangeMetric*$TrafficChangePercent/100))).toFixed(2);\n  var predictedMetric=((metricAVG/sampleCount+((metricAVG/sampleCount)*((percentChangeMetric+((percentChangeMetric*$TrafficChangePercent/100)))/100))));\n  if (predictedMetric<0) predictedMetric=0;\n  if (newChangeMetric>3) \n    {\n      return metricName+\" is \"+Number(metricAVG/sampleCount).toFixed(2)+\". Predicted \"+metricName+\" is \"+(predictedMetric).toFixed(2)+\" modeled with a \"+$TrafficChangePercent+\"% traffic increase.\";\n    }\n  if (newChangeMetric<-3)\n    {\n      return metricName+\" is \"+Number(metricAVG/sampleCount).toFixed(2)+\". Predicted \"+metricName+\" is \"+(predictedMetric).toFixed(2)+\" modeled with a \"+$TrafficChangePercent+\"% traffic increase.\";\n    }\n  return \"There will be no noticable change in \"+metricName+\".\";\n}","visualization":"singleValue","visualizationSettings":{"thresholds":[],"chartSettings":{"gapPolicy":"connect","circleChartSettings":{"groupingThresholdType":"relative","groupingThresholdValue":0,"valueType":"relative"},"categoryOverrides":{}},"singleValue":{"showLabel":false,"label":"","prefixIcon":"","autoscale":true,"alignment":"start"},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"lineWrapIds":[],"columnWidths":{}},"unitsOverrides":[{"identifier":"Diff","unitCategory":"unspecified","baseUnit":"none","displayUnit":null,"decimals":2,"suffix":"","delimiter":false,"added":1701281148734}]}},"5":{"type":"code","title":"Duration Change","input":"import { rumUserSessionsClient } from \"@dynatrace-sdk/client-classic-environment-v1\";\nexport default async function () {\n  const metric = \"duration\";\n  const startTime = Date.parse($dt_timeframe_from).toString();  // Get Dashboard Start Time\n  const endTime = Date.parse($dt_timeframe_to).toString();      // Get Dashboard End Time\n  // Calculate Chart Interval\n  const timeDiff = (endTime-startTime)/3600/1000/24;\n  var chartInterval = \"1m\"\n  var appsList = \"\\\"\"+$AppName[0]+\"\\\"\";\n  let i = 1;\n  // Build Apps List\n  while (i < 10) {\n    if ($AppName[i]==null) break;\n    appsList = appsList+\",\\\"\"+$AppName[i]+\"\\\"\";\n    i++;\n  }\n  var usqlQuery = 'SELECT DISTINCT DATETIME(endTime,  \"MM-dd HH:mm:ss\",\"'+chartInterval+'\") AS \"Date\", count(*) AS \"Count\", avg('+metric+') AS \"Metric\" from useraction WHERE useraction.application in ('+appsList+') and usersession.starttime>='+startTime+' and usersession.endtime<='+endTime+' limit 5000';\n  if ($ActionType==\"Key\") usqlQuery = 'SELECT DISTINCT DATETIME(endTime,  \"MM-dd HH:mm:ss\",\"'+chartInterval+'\") AS \"Date\", count(*) AS \"Count\", avg('+metric+') AS \"Metric\" from useraction WHERE useraction.application in ('+appsList+') and usersession.starttime>='+startTime+' and usersession.endtime<='+endTime+' and keyuseraction is true limit 5000';\n  if ($ActionType==\"Entry\") usqlQuery = 'SELECT DISTINCT DATETIME(endTime,  \"MM-dd HH:mm:ss\",\"'+chartInterval+'\") AS \"Date\", count(*) AS \"Count\", avg('+metric+') AS \"Metric\" from useraction WHERE useraction.application in ('+appsList+') and usersession.starttime>='+startTime+' and usersession.endtime<='+endTime+' and isentryaction is true  limit 5000';\n  if ($ActionType==\"Exit\") usqlQuery = 'SELECT DISTINCT DATETIME(endTime,  \"MM-dd HH:mm:ss\",\"'+chartInterval+'\") AS \"Date\", count(*) AS \"Count\", avg('+metric+') AS \"Metric\" from useraction WHERE useraction.application in ('+appsList+') and usersession.starttime>='+startTime+' and usersession.endtime<='+endTime+' and isexitaction is true limit 5000';\n  const response = await rumUserSessionsClient.getUsqlResultAsTable({query: usqlQuery, startTimestamp: startTime, endTimestamp: endTime});\n  if (response.values.length<6) return \"Try increasing the timeframe.\";\n  const sampleCount = response.values.length-5;\n  let percentChangeMetric = 0;\n  let percentChangeTraffic = 0;\n  let trafficAVG = 0;\n  let metricAVG = 0;\n  let metricAAVG = 0;\n  let metricBAVG = 0;\n  let trafficAAVG = 0;\n  let trafficBAVG = 0;\n  let c = 0;\n  while (c < sampleCount) {\n    trafficAVG = trafficAVG + response.values[c][1];\n    metricAVG = metricAVG + response.values[c][2];\n    c++;\n  }\n  let i2 = 0;\n  let i2A = 0;\n  let i2B = 0;\n  while (i2 < sampleCount) {\n    if (response.values[i2][1]>(trafficAVG/sampleCount))\n      {\n        metricAAVG=metricAAVG+response.values[i2][2];\n        trafficAAVG=trafficAAVG+response.values[i2][1];\n        i2A++;\n      }\n    if (response.values[i2][1]<(trafficAVG/sampleCount)) \n      {\n        metricBAVG=metricBAVG+response.values[i2][2];\n        trafficBAVG=trafficBAVG+response.values[i2][1];\n        i2B++;\n      }\n    i2++;\n  }\n  if ((metricBAVG/i2B)==0) return \"0.00%\";\n  percentChangeMetric = ((Number(metricAAVG/i2A) - Number(metricBAVG/i2B))/Number(metricBAVG/i2B))*100;\n  return (percentChangeMetric+((percentChangeMetric*$TrafficChangePercent/100))).toFixed(2)+\"%\"\n}","visualization":"singleValue","visualizationSettings":{"thresholds":[],"chartSettings":{"gapPolicy":"connect","circleChartSettings":{"groupingThresholdType":"relative","groupingThresholdValue":0,"valueType":"relative"},"categoryOverrides":{}},"singleValue":{"showLabel":false,"label":"","prefixIcon":"","autoscale":true,"alignment":"start"},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"lineWrapIds":[],"columnWidths":{}},"unitsOverrides":[{"identifier":"Diff","unitCategory":"unspecified","baseUnit":"none","displayUnit":null,"decimals":2,"suffix":"","delimiter":false,"added":1701281148734}]}},"7":{"type":"code","title":"Duration Distribution Below/Above Traffic Average","input":"import { rumUserSessionsClient } from \"@dynatrace-sdk/client-classic-environment-v1\";\nexport default async function () {\n  const startTime = Date.parse($dt_timeframe_from).toString();  // Get Dashboard Start Time\n  const endTime = Date.parse($dt_timeframe_to).toString();      // Get Dashboard End Time\n  // Calculate Chart Interval\n  const timeDiff = (endTime-startTime)/3600/1000/24;\n  var chartInterval = \"1m\"\n  var appsList = \"\\\"\"+$AppName[0]+\"\\\"\";\n  let i = 1;\n  // Build Apps List\n  while (i < 10) {\n    if ($AppName[i]==null) break;\n    appsList = appsList+\",\\\"\"+$AppName[i]+\"\\\"\";\n    i++;\n  }\n  var usqlQuery = 'SELECT DISTINCT DATETIME(endTime,  \"MM-dd HH:mm:ss\",\"'+chartInterval+'\") AS \"Date\", count(*) AS \"Count\", avg(duration) AS \"Duration\" from useraction WHERE useraction.application in ('+appsList+') and usersession.starttime>='+startTime+' and usersession.endtime<='+endTime+' limit 5000';\n  if ($ActionType==\"Key\") usqlQuery = 'SELECT DISTINCT DATETIME(endTime,  \"MM-dd HH:mm:ss\",\"'+chartInterval+'\") AS \"Date\", count(*) AS \"Count\", avg(duration) AS \"Duration\" from useraction WHERE useraction.application in ('+appsList+') and usersession.starttime>='+startTime+' and usersession.endtime<='+endTime+' and keyuseraction is true limit 5000';\n  if ($ActionType==\"Entry\") usqlQuery = 'SELECT DISTINCT DATETIME(endTime,  \"MM-dd HH:mm:ss\",\"'+chartInterval+'\") AS \"Date\", count(*) AS \"Count\", avg(duration) AS \"Duration\" from useraction WHERE useraction.application in ('+appsList+') and usersession.starttime>='+startTime+' and usersession.endtime<='+endTime+' and isentryaction is true  limit 5000';\n  if ($ActionType==\"Exit\") usqlQuery = 'SELECT DISTINCT DATETIME(endTime,  \"MM-dd HH:mm:ss\",\"'+chartInterval+'\") AS \"Date\", count(*) AS \"Count\", avg(duration) AS \"Duration\" from useraction WHERE useraction.application in ('+appsList+') and usersession.starttime>='+startTime+' and usersession.endtime<='+endTime+' and isexitaction is true limit 5000';\n  const response = await rumUserSessionsClient.getUsqlResultAsTable({query: usqlQuery, startTimestamp: startTime, endTimestamp: endTime});\n  const sampleCount = response.values.length-5;\n  let percentChangeDuration = 0;\n  let percentChangeTraffic = 0;\n  let trafficAVG = 0;\n  let durationAVG = 0;\n  let durationAAVG = 0;\n  let durationBAVG = 0;\n  let trafficAAVG = 0;\n  let trafficBAVG = 0;\n  let durationMAX = response.values[0][2];\n  let durationMIN = response.values[0][2];\n  let c = 0;\n  while (c < sampleCount) {\n    trafficAVG = trafficAVG + response.values[c][1];\n    durationAVG = durationAVG + response.values[c][2];\n    if (response.values[c][2]>durationMAX) durationMAX=response.values[c][2];\n    if (response.values[c][2]<durationMIN) durationMIN=response.values[c][2];\n    c++;\n  }\n  let i2 = 0;\n  let i2A = 0;\n  let i2B = 0;\n  while (i2 < sampleCount) {\n    if (response.values[i2][1]>(trafficAVG/sampleCount))\n      {\n        durationAAVG=durationAAVG+response.values[i2][2];\n        trafficAAVG=trafficAAVG+response.values[i2][1];\n        i2A++;\n      }\n    if (response.values[i2][1]<(trafficAVG/sampleCount)) \n      {\n        durationBAVG=durationBAVG+response.values[i2][2];\n        trafficBAVG=trafficBAVG+response.values[i2][1];\n        i2B++;\n      }\n    i2++;\n  }\n//  percentChangeDuration = (Number(durationAAVG/i2A).toFixed(2) - Number(durationBAVG/i2B).toFixed(2))/Number(durationBAVG/i2B).toFixed(2)*100;\n//  percentChangeTraffic = (Number(trafficAAVG/i2A).toFixed(2) - Number(trafficBAVG/i2B).toFixed(2))/Number(trafficBAVG/i2B).toFixed(2)*100;\n\n  \nreturn {\n    records: [\n     {\n        'Traffic': \"Below Average\",\n        'Duration': (durationBAVG/i2B)\n      },\n    {   'Traffic': \"Average\",\n        'Duration': (durationAVG/sampleCount)\n      },\n    {   'Traffic': \"Above Average\",\n        'Duration': (durationAAVG/i2A)\n      },\n],\n    types: [\n      {\n        indexRange: [0, 2],\n        mappings: {\n          'Traffic': { type: 'string' },\n          'Duration': { type: 'double' }\n        },\n      },\n    ],\n  };\n}","visualization":"categoricalBarChart","visualizationSettings":{"thresholds":[{"id":1,"field":"","title":"","isEnabled":true,"rules":[{"id":0,"color":{"Default":"var(--dt-colors-charts-categorical-color-09-default, #649438)"},"comparator":"≥","label":""},{"id":1,"color":{"Default":"var(--dt-colors-charts-categorical-color-14-default, #d56b1a)"},"comparator":"≥","label":""},{"id":2,"color":{"Default":"var(--dt-colors-charts-categorical-color-12-default, #cd3741)"},"comparator":"≥","label":""}]}],"chartSettings":{"gapPolicy":"connect","circleChartSettings":{"groupingThresholdType":"relative","groupingThresholdValue":0,"valueType":"relative"},"categoryOverrides":{"Below Average":{"color":"var(--dt-colors-charts-categorical-color-03-default, #2a7453)","added":1701452595143},"Average":{"color":"var(--dt-colors-charts-categorical-color-06-default, #a9780f)","added":1701452607415},"Above Average":{"color":"var(--dt-colors-charts-security-risk-level-critical-default, #8a0012)","added":1701452636972}},"legend":{"hidden":true},"categoricalBarChartSettings":{"categoryAxis":"Traffic","categoryAxisLabel":"","valueAxis":"Duration","valueAxisLabel":"Duration"}},"singleValue":{"showLabel":true,"label":"","prefixIcon":"","autoscale":true,"alignment":"center"},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"lineWrapIds":[],"columnWidths":{}},"unitsOverrides":[{"identifier":"Diff","unitCategory":"unspecified","baseUnit":"none","displayUnit":null,"decimals":2,"suffix":"","delimiter":false,"added":1701281148734}]}},"10":{"type":"code","title":"Duration Health","input":"import { rumUserSessionsClient } from \"@dynatrace-sdk/client-classic-environment-v1\";\nexport default async function () {\n  const metric = \"duration\";\n  const startTime = Date.parse($dt_timeframe_from).toString();  // Get Dashboard Start Time\n  const endTime = Date.parse($dt_timeframe_to).toString();      // Get Dashboard End Time\n  // Calculate Chart Interval\n  const timeDiff = (endTime-startTime)/3600/1000/24;\n  var chartInterval = \"1m\"\n  var appsList = \"\\\"\"+$AppName[0]+\"\\\"\";\n  let i = 1;\n  // Build Apps List\n  while (i < 10) {\n    if ($AppName[i]==null) break;\n    appsList = appsList+\",\\\"\"+$AppName[i]+\"\\\"\";\n    i++;\n  }\n  var usqlQuery = 'SELECT DISTINCT DATETIME(endTime,  \"MM-dd HH:mm:ss\",\"'+chartInterval+'\") AS \"Date\", count(*) AS \"Count\", avg('+metric+') AS \"Metric\" from useraction WHERE useraction.application in ('+appsList+') and usersession.starttime>='+startTime+' and usersession.endtime<='+endTime+' limit 5000';\n  if ($ActionType==\"Key\") usqlQuery = 'SELECT DISTINCT DATETIME(endTime,  \"MM-dd HH:mm:ss\",\"'+chartInterval+'\") AS \"Date\", count(*) AS \"Count\", avg('+metric+') AS \"Metric\" from useraction WHERE useraction.application in ('+appsList+') and usersession.starttime>='+startTime+' and usersession.endtime<='+endTime+' and keyuseraction is true limit 5000';\n  if ($ActionType==\"Entry\") usqlQuery = 'SELECT DISTINCT DATETIME(endTime,  \"MM-dd HH:mm:ss\",\"'+chartInterval+'\") AS \"Date\", count(*) AS \"Count\", avg('+metric+') AS \"Metric\" from useraction WHERE useraction.application in ('+appsList+') and usersession.starttime>='+startTime+' and usersession.endtime<='+endTime+' and isentryaction is true  limit 5000';\n  if ($ActionType==\"Exit\") usqlQuery = 'SELECT DISTINCT DATETIME(endTime,  \"MM-dd HH:mm:ss\",\"'+chartInterval+'\") AS \"Date\", count(*) AS \"Count\", avg('+metric+') AS \"Metric\" from useraction WHERE useraction.application in ('+appsList+') and usersession.starttime>='+startTime+' and usersession.endtime<='+endTime+' and isexitaction is true limit 5000';\n  const response = await rumUserSessionsClient.getUsqlResultAsTable({query: usqlQuery, startTimestamp: startTime, endTimestamp: endTime});\n  if (response.values.length<6) return \"Try increasing the timeframe.\";\n  const sampleCount = response.values.length-5;\n  let percentChangeMetric = 0;\n  let percentChangeTraffic = 0;\n  let trafficAVG = 0;\n  let metricAVG = 0;\n  let metricAAVG = 0;\n  let metricBAVG = 0;\n  let trafficAAVG = 0;\n  let trafficBAVG = 0;\n  let c = 0;\n  while (c < sampleCount) {\n    trafficAVG = trafficAVG + response.values[c][1];\n    metricAVG = metricAVG + response.values[c][2];\n    c++;\n  }\n  let i2 = 0;\n  let i2A = 0;\n  let i2B = 0;\n  while (i2 < sampleCount) {\n    if (response.values[i2][1]>(trafficAVG/sampleCount))\n      {\n        metricAAVG=metricAAVG+response.values[i2][2];\n        trafficAAVG=trafficAAVG+response.values[i2][1];\n        i2A++;\n      }\n    if (response.values[i2][1]<(trafficAVG/sampleCount)) \n      {\n        metricBAVG=metricBAVG+response.values[i2][2];\n        trafficBAVG=trafficBAVG+response.values[i2][1];\n        i2B++;\n      }\n    i2++;\n  }\n  percentChangeMetric = ((Number(metricAAVG/i2A) - Number(metricBAVG/i2B))/Number(metricBAVG/i2B))*100;\n  if ((percentChangeMetric+((percentChangeMetric*$TrafficChangePercent/100)))>3) return \"🔴\";\n  if ((percentChangeMetric+((percentChangeMetric*$TrafficChangePercent/100)))>0) return \"🟡\";\n  return \"🟢\"\n}","visualization":"singleValue","visualizationSettings":{"thresholds":[],"chartSettings":{"gapPolicy":"connect","circleChartSettings":{"groupingThresholdType":"relative","groupingThresholdValue":0,"valueType":"relative"},"categoryOverrides":{}},"singleValue":{"showLabel":false,"label":"","prefixIcon":"","autoscale":true,"alignment":"center"},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"lineWrapIds":[],"columnWidths":{}},"unitsOverrides":[{"identifier":"Diff","unitCategory":"unspecified","baseUnit":"none","displayUnit":null,"decimals":2,"suffix":"","delimiter":false,"added":1701281148734}]}},"11":{"type":"markdown","title":"","content":"![](data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAABy8AAAAMCAYAAADbJPG3AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAAEnQAABJ0Ad5mH3gAAACdSURBVHhe7dtBFcAgDETBUBtFA6KrDhf0gofsYeay8fBfRn37FAAAAAAAAECz5y4AAAAAAABAK/ESAAAAAAAAiCBeAgAAAAAAABHESwAAAAAAACCCeAkAAAAAAABEEC8BAAAAAACACOIlAAAAAAAAEGG8c517AwAAAAAAALTxeQkAAAAAAABEEC8BAAAAAACACOIlAAAAAAAAEKDqB2IIBAQ2TEouAAAAAElFTkSuQmCC)"},"12":{"type":"markdown","title":"","content":"![](data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAABy8AAAAMCAYAAADbJPG3AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAAEnQAABJ0Ad5mH3gAAACdSURBVHhe7dtBFcAgDETBUBtFA6KrDhf0gofsYeay8fBfRn37FAAAAAAAAECz5y4AAAAAAABAK/ESAAAAAAAAiCBeAgAAAAAAABHESwAAAAAAACCCeAkAAAAAAABEEC8BAAAAAACACOIlAAAAAAAAEGG8c517AwAAAAAAALTxeQkAAAAAAABEEC8BAAAAAACACOIlAAAAAAAAEKDqB2IIBAQ2TEouAAAAAElFTkSuQmCC)"},"13":{"type":"markdown","title":"","content":"![](data:image/webp;base64,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)"},"14":{"type":"markdown","title":"","content":"![](data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAABy8AAAAMCAYAAADbJPG3AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAAEnQAABJ0Ad5mH3gAAACdSURBVHhe7dtBFcAgDETBUBtFA6KrDhf0gofsYeay8fBfRn37FAAAAAAAAECz5y4AAAAAAABAK/ESAAAAAAAAiCBeAgAAAAAAABHESwAAAAAAACCCeAkAAAAAAABEEC8BAAAAAACACOIlAAAAAAAAEGG8c517AwAAAAAAALTxeQkAAAAAAABEEC8BAAAAAACACOIlAAAAAAAAEKDqB2IIBAQ2TEouAAAAAElFTkSuQmCC)"},"15":{"type":"markdown","title":"","content":"![](data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAABy8AAAAMCAYAAADbJPG3AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAAEnQAABJ0Ad5mH3gAAACdSURBVHhe7dtBFcAgDETBUBtFA6KrDhf0gofsYeay8fBfRn37FAAAAAAAAECz5y4AAAAAAABAK/ESAAAAAAAAiCBeAgAAAAAAABHESwAAAAAAACCCeAkAAAAAAABEEC8BAAAAAACACOIlAAAAAAAAEGG8c517AwAAAAAAALTxeQkAAAAAAABEEC8BAAAAAACACOIlAAAAAAAAEKDqB2IIBAQ2TEouAAAAAElFTkSuQmCC)"},"16":{"type":"code","title":"Request Error Change","input":"import { rumUserSessionsClient } from \"@dynatrace-sdk/client-classic-environment-v1\";\nexport default async function () {\n  const metric = \"requestErrorCount\";\n  const startTime = Date.parse($dt_timeframe_from).toString();  // Get Dashboard Start Time\n  const endTime = Date.parse($dt_timeframe_to).toString();      // Get Dashboard End Time\n  // Calculate Chart Interval\n  const timeDiff = (endTime-startTime)/3600/1000/24;\n  var chartInterval = \"1m\"\n  var appsList = \"\\\"\"+$AppName[0]+\"\\\"\";\n  let i = 1;\n  // Build Apps List\n  while (i < 10) {\n    if ($AppName[i]==null) break;\n    appsList = appsList+\",\\\"\"+$AppName[i]+\"\\\"\";\n    i++;\n  }\n  var usqlQuery = 'SELECT DISTINCT DATETIME(endTime,  \"MM-dd HH:mm:ss\",\"'+chartInterval+'\") AS \"Date\", count(*) AS \"Count\", avg('+metric+') AS \"Metric\" from useraction WHERE useraction.application in ('+appsList+') and usersession.starttime>='+startTime+' and usersession.endtime<='+endTime+' limit 5000';\n  if ($ActionType==\"Key\") usqlQuery = 'SELECT DISTINCT DATETIME(endTime,  \"MM-dd HH:mm:ss\",\"'+chartInterval+'\") AS \"Date\", count(*) AS \"Count\", avg('+metric+') AS \"Metric\" from useraction WHERE useraction.application in ('+appsList+') and usersession.starttime>='+startTime+' and usersession.endtime<='+endTime+' and keyuseraction is true limit 5000';\n  if ($ActionType==\"Entry\") usqlQuery = 'SELECT DISTINCT DATETIME(endTime,  \"MM-dd HH:mm:ss\",\"'+chartInterval+'\") AS \"Date\", count(*) AS \"Count\", avg('+metric+') AS \"Metric\" from useraction WHERE useraction.application in ('+appsList+') and usersession.starttime>='+startTime+' and usersession.endtime<='+endTime+' and isentryaction is true  limit 5000';\n  if ($ActionType==\"Exit\") usqlQuery = 'SELECT DISTINCT DATETIME(endTime,  \"MM-dd HH:mm:ss\",\"'+chartInterval+'\") AS \"Date\", count(*) AS \"Count\", avg('+metric+') AS \"Metric\" from useraction WHERE useraction.application in ('+appsList+') and usersession.starttime>='+startTime+' and usersession.endtime<='+endTime+' and isexitaction is true limit 5000';\n  const response = await rumUserSessionsClient.getUsqlResultAsTable({query: usqlQuery, startTimestamp: startTime, endTimestamp: endTime});\n  if (response.values.length<6) return \"Try increasing the timeframe.\";\n  const sampleCount = response.values.length-5;\n  let percentChangeMetric = 0;\n  let percentChangeTraffic = 0;\n  let trafficAVG = 0;\n  let metricAVG = 0;\n  let metricAAVG = 0;\n  let metricBAVG = 0;\n  let trafficAAVG = 0;\n  let trafficBAVG = 0;\n  let c = 0;\n  while (c < sampleCount) {\n    trafficAVG = trafficAVG + response.values[c][1];\n    metricAVG = metricAVG + response.values[c][2];\n    c++;\n  }\n  let i2 = 0;\n  let i2A = 0;\n  let i2B = 0;\n  while (i2 < sampleCount) {\n    if (response.values[i2][1]>(trafficAVG/sampleCount))\n      {\n        metricAAVG=metricAAVG+response.values[i2][2];\n        trafficAAVG=trafficAAVG+response.values[i2][1];\n        i2A++;\n      }\n    if (response.values[i2][1]<(trafficAVG/sampleCount)) \n      {\n        metricBAVG=metricBAVG+response.values[i2][2];\n        trafficBAVG=trafficBAVG+response.values[i2][1];\n        i2B++;\n      }\n    i2++;\n  }\n  if ((metricBAVG/i2B)==0) return \"0.00%\";\n  percentChangeMetric = ((Number(metricAAVG/i2A) - Number(metricBAVG/i2B))/Number(metricBAVG/i2B))*100;\n  return (percentChangeMetric+((percentChangeMetric*$TrafficChangePercent/100))).toFixed(2)+\"%\"\n}","visualization":"singleValue","visualizationSettings":{"thresholds":[],"chartSettings":{"gapPolicy":"connect","circleChartSettings":{"groupingThresholdType":"relative","groupingThresholdValue":0,"valueType":"relative"},"categoryOverrides":{}},"singleValue":{"showLabel":false,"label":"","prefixIcon":"","autoscale":true,"alignment":"start"},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"lineWrapIds":[],"columnWidths":{}},"unitsOverrides":[{"identifier":"Diff","unitCategory":"unspecified","baseUnit":"none","displayUnit":null,"decimals":2,"suffix":"","delimiter":false,"added":1701281148734}]}},"17":{"type":"code","title":"Request Error Health","input":"import { rumUserSessionsClient } from \"@dynatrace-sdk/client-classic-environment-v1\";\nexport default async function () {\n  const metric = \"requestErrorCount\";\n  const startTime = Date.parse($dt_timeframe_from).toString();  // Get Dashboard Start Time\n  const endTime = Date.parse($dt_timeframe_to).toString();      // Get Dashboard End Time\n  // Calculate Chart Interval\n  const timeDiff = (endTime-startTime)/3600/1000/24;\n  var chartInterval = \"1m\"\n  var appsList = \"\\\"\"+$AppName[0]+\"\\\"\";\n  let i = 1;\n  // Build Apps List\n  while (i < 10) {\n    if ($AppName[i]==null) break;\n    appsList = appsList+\",\\\"\"+$AppName[i]+\"\\\"\";\n    i++;\n  }\n  var usqlQuery = 'SELECT DISTINCT DATETIME(endTime,  \"MM-dd HH:mm:ss\",\"'+chartInterval+'\") AS \"Date\", count(*) AS \"Count\", avg('+metric+') AS \"Metric\" from useraction WHERE useraction.application in ('+appsList+') and usersession.starttime>='+startTime+' and usersession.endtime<='+endTime+' limit 5000';\n  if ($ActionType==\"Key\") usqlQuery = 'SELECT DISTINCT DATETIME(endTime,  \"MM-dd HH:mm:ss\",\"'+chartInterval+'\") AS \"Date\", count(*) AS \"Count\", avg('+metric+') AS \"Metric\" from useraction WHERE useraction.application in ('+appsList+') and usersession.starttime>='+startTime+' and usersession.endtime<='+endTime+' and keyuseraction is true limit 5000';\n  if ($ActionType==\"Entry\") usqlQuery = 'SELECT DISTINCT DATETIME(endTime,  \"MM-dd HH:mm:ss\",\"'+chartInterval+'\") AS \"Date\", count(*) AS \"Count\", avg('+metric+') AS \"Metric\" from useraction WHERE useraction.application in ('+appsList+') and usersession.starttime>='+startTime+' and usersession.endtime<='+endTime+' and isentryaction is true  limit 5000';\n  if ($ActionType==\"Exit\") usqlQuery = 'SELECT DISTINCT DATETIME(endTime,  \"MM-dd HH:mm:ss\",\"'+chartInterval+'\") AS \"Date\", count(*) AS \"Count\", avg('+metric+') AS \"Metric\" from useraction WHERE useraction.application in ('+appsList+') and usersession.starttime>='+startTime+' and usersession.endtime<='+endTime+' and isexitaction is true limit 5000';\n  const response = await rumUserSessionsClient.getUsqlResultAsTable({query: usqlQuery, startTimestamp: startTime, endTimestamp: endTime});\n  if (response.values.length<6) return \"Try increasing the timeframe.\";\n  const sampleCount = response.values.length-5;\n  let percentChangeMetric = 0;\n  let percentChangeTraffic = 0;\n  let trafficAVG = 0;\n  let metricAVG = 0;\n  let metricAAVG = 0;\n  let metricBAVG = 0;\n  let trafficAAVG = 0;\n  let trafficBAVG = 0;\n  let c = 0;\n  while (c < sampleCount) {\n    trafficAVG = trafficAVG + response.values[c][1];\n    metricAVG = metricAVG + response.values[c][2];\n    c++;\n  }\n  let i2 = 0;\n  let i2A = 0;\n  let i2B = 0;\n  while (i2 < sampleCount) {\n    if (response.values[i2][1]>(trafficAVG/sampleCount))\n      {\n        metricAAVG=metricAAVG+response.values[i2][2];\n        trafficAAVG=trafficAAVG+response.values[i2][1];\n        i2A++;\n      }\n    if (response.values[i2][1]<(trafficAVG/sampleCount)) \n      {\n        metricBAVG=metricBAVG+response.values[i2][2];\n        trafficBAVG=trafficBAVG+response.values[i2][1];\n        i2B++;\n      }\n    i2++;\n  }\n  percentChangeMetric = ((Number(metricAAVG/i2A) - Number(metricBAVG/i2B))/Number(metricBAVG/i2B))*100;\n  if ((percentChangeMetric+((percentChangeMetric*$TrafficChangePercent/100)))>3) return \"🔴\";\n  if ((percentChangeMetric+((percentChangeMetric*$TrafficChangePercent/100)))>0) return \"🟡\";\n  return \"🟢\"\n}","visualization":"singleValue","visualizationSettings":{"thresholds":[],"chartSettings":{"gapPolicy":"connect","circleChartSettings":{"groupingThresholdType":"relative","groupingThresholdValue":0,"valueType":"relative"},"categoryOverrides":{}},"singleValue":{"showLabel":false,"label":"","prefixIcon":"","autoscale":true,"alignment":"center"},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"lineWrapIds":[],"columnWidths":{}},"unitsOverrides":[{"identifier":"Diff","unitCategory":"unspecified","baseUnit":"none","displayUnit":null,"decimals":2,"suffix":"","delimiter":false,"added":1701281148734}]}},"18":{"type":"code","title":"Request Error Impact","input":"import { rumUserSessionsClient } from \"@dynatrace-sdk/client-classic-environment-v1\";\nexport default async function () {\n  const metric = \"requestErrorCount\";\n  const metricName = \"Error Rate\";\n  const startTime = Date.parse($dt_timeframe_from).toString();  // Get Dashboard Start Time\n  const endTime = Date.parse($dt_timeframe_to).toString();      // Get Dashboard End Time\n  // Calculate Chart Interval\n  const timeDiff = (endTime-startTime)/3600/1000/24;\n  var chartInterval = \"1m\"\n  var appsList = \"\\\"\"+$AppName[0]+\"\\\"\";\n  let i = 1;\n  // Build Apps List\n  while (i < 10) {\n    if ($AppName[i]==null) break;\n    appsList = appsList+\",\\\"\"+$AppName[i]+\"\\\"\";\n    i++;\n  }\n  var usqlQuery = 'SELECT DISTINCT DATETIME(endTime,  \"MM-dd HH:mm:ss\",\"'+chartInterval+'\") AS \"Date\", count(*) AS \"Count\", avg('+metric+') AS \"Metric\" from useraction WHERE useraction.application in ('+appsList+') and usersession.starttime>='+startTime+' and usersession.endtime<='+endTime+' limit 5000';\n  if ($ActionType==\"Key\") usqlQuery = 'SELECT DISTINCT DATETIME(endTime,  \"MM-dd HH:mm:ss\",\"'+chartInterval+'\") AS \"Date\", count(*) AS \"Count\", avg('+metric+') AS \"Metric\" from useraction WHERE useraction.application in ('+appsList+') and usersession.starttime>='+startTime+' and usersession.endtime<='+endTime+' and keyuseraction is true limit 5000';\n  if ($ActionType==\"Entry\") usqlQuery = 'SELECT DISTINCT DATETIME(endTime,  \"MM-dd HH:mm:ss\",\"'+chartInterval+'\") AS \"Date\", count(*) AS \"Count\", avg('+metric+') AS \"Metric\" from useraction WHERE useraction.application in ('+appsList+') and usersession.starttime>='+startTime+' and usersession.endtime<='+endTime+' and isentryaction is true  limit 5000';\n  if ($ActionType==\"Exit\") usqlQuery = 'SELECT DISTINCT DATETIME(endTime,  \"MM-dd HH:mm:ss\",\"'+chartInterval+'\") AS \"Date\", count(*) AS \"Count\", avg('+metric+') AS \"Metric\" from useraction WHERE useraction.application in ('+appsList+') and usersession.starttime>='+startTime+' and usersession.endtime<='+endTime+' and isexitaction is true limit 5000';\n  const response = await rumUserSessionsClient.getUsqlResultAsTable({query: usqlQuery, startTimestamp: startTime, endTimestamp: endTime});\n  if (response.values.length<6) return \"Try increasing the timeframe.\";\n  const sampleCount = response.values.length-5;\n  let percentChangeMetric = 0;\n  let percentChangeTraffic = 0;\n  let trafficAVG = 0;\n  let metricAVG = 0;\n  let metricAAVG = 0;\n  let metricBAVG = 0;\n  let trafficAAVG = 0;\n  let trafficBAVG = 0;\n  let c = 0;\n  while (c < sampleCount) {\n    trafficAVG = trafficAVG + response.values[c][1];\n    metricAVG = metricAVG + response.values[c][2];\n    c++;\n  }\n  let i2 = 0;\n  let i2A = 0;\n  let i2B = 0;\n  while (i2 < sampleCount) {\n    if (response.values[i2][1]>(trafficAVG/sampleCount))\n      {\n        metricAAVG=metricAAVG+response.values[i2][2];\n        trafficAAVG=trafficAAVG+response.values[i2][1];\n        i2A++;\n      }\n    if (response.values[i2][1]<(trafficAVG/sampleCount)) \n      {\n        metricBAVG=metricBAVG+response.values[i2][2];\n        trafficBAVG=trafficBAVG+response.values[i2][1];\n        i2B++;\n      }\n    i2++;\n  }\n  percentChangeMetric = (Number(metricAAVG/i2A) - Number(metricBAVG/i2B))/Number(metricBAVG/i2B)*100;\n  percentChangeTraffic = (Number(trafficAAVG/i2A) - Number(trafficBAVG/i2B))/Number(trafficBAVG/i2B)*100;\n  let newChangeMetric = (percentChangeMetric+((percentChangeMetric*$TrafficChangePercent/100))).toFixed(2);\n  var predictedMetric=((metricAVG/sampleCount+((metricAVG/sampleCount)*((percentChangeMetric+((percentChangeMetric*$TrafficChangePercent/100)))/100))));\n  if (predictedMetric<0) predictedMetric=0;\n  if (newChangeMetric>3) \n    {\n      return metricName+\" is \"+Number((metricAVG/sampleCount)*100).toFixed(2)+\". Predicted \"+metricName+\" is \"+(predictedMetric*100).toFixed(2)+\" modeled with a \"+$TrafficChangePercent+\"% traffic increase.\";\n    }\n  if (newChangeMetric<-3)\n    {\n      return metricName+\" is \"+Number((metricAVG/sampleCount)*100).toFixed(2)+\". Predicted \"+metricName+\" is \"+(predictedMetric*100).toFixed(2)+\" modeled with a \"+$TrafficChangePercent+\"% traffic increase.\";\n    }\n  return \"There will be no noticable change in \"+metricName+\".\";\n}","visualization":"singleValue","visualizationSettings":{"thresholds":[],"chartSettings":{"gapPolicy":"connect","circleChartSettings":{"groupingThresholdType":"relative","groupingThresholdValue":0,"valueType":"relative"},"categoryOverrides":{}},"singleValue":{"showLabel":false,"label":"","prefixIcon":"","autoscale":true,"alignment":"start"},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"lineWrapIds":[],"columnWidths":{}},"unitsOverrides":[{"identifier":"Diff","unitCategory":"unspecified","baseUnit":"none","displayUnit":null,"decimals":2,"suffix":"","delimiter":false,"added":1701281148734}]}},"19":{"type":"code","title":"JavaScript Error Change","input":"import { rumUserSessionsClient } from \"@dynatrace-sdk/client-classic-environment-v1\";\nexport default async function () {\n  const metric = \"javascriptErrorCount\";\n  const startTime = Date.parse($dt_timeframe_from).toString();  // Get Dashboard Start Time\n  const endTime = Date.parse($dt_timeframe_to).toString();      // Get Dashboard End Time\n  // Calculate Chart Interval\n  const timeDiff = (endTime-startTime)/3600/1000/24;\n  var chartInterval = \"1m\"\n  var appsList = \"\\\"\"+$AppName[0]+\"\\\"\";\n  let i = 1;\n  // Build Apps List\n  while (i < 10) {\n    if ($AppName[i]==null) break;\n    appsList = appsList+\",\\\"\"+$AppName[i]+\"\\\"\";\n    i++;\n  }\n  var usqlQuery = 'SELECT DISTINCT DATETIME(endTime,  \"MM-dd HH:mm:ss\",\"'+chartInterval+'\") AS \"Date\", count(*) AS \"Count\", avg('+metric+') AS \"Metric\" from useraction WHERE useraction.application in ('+appsList+') and usersession.starttime>='+startTime+' and usersession.endtime<='+endTime+' limit 5000';\n  if ($ActionType==\"Key\") usqlQuery = 'SELECT DISTINCT DATETIME(endTime,  \"MM-dd HH:mm:ss\",\"'+chartInterval+'\") AS \"Date\", count(*) AS \"Count\", avg('+metric+') AS \"Metric\" from useraction WHERE useraction.application in ('+appsList+') and usersession.starttime>='+startTime+' and usersession.endtime<='+endTime+' and keyuseraction is true limit 5000';\n  if ($ActionType==\"Entry\") usqlQuery = 'SELECT DISTINCT DATETIME(endTime,  \"MM-dd HH:mm:ss\",\"'+chartInterval+'\") AS \"Date\", count(*) AS \"Count\", avg('+metric+') AS \"Metric\" from useraction WHERE useraction.application in ('+appsList+') and usersession.starttime>='+startTime+' and usersession.endtime<='+endTime+' and isentryaction is true  limit 5000';\n  if ($ActionType==\"Exit\") usqlQuery = 'SELECT DISTINCT DATETIME(endTime,  \"MM-dd HH:mm:ss\",\"'+chartInterval+'\") AS \"Date\", count(*) AS \"Count\", avg('+metric+') AS \"Metric\" from useraction WHERE useraction.application in ('+appsList+') and usersession.starttime>='+startTime+' and usersession.endtime<='+endTime+' and isexitaction is true limit 5000';\n  const response = await rumUserSessionsClient.getUsqlResultAsTable({query: usqlQuery, startTimestamp: startTime, endTimestamp: endTime});\n  if (response.values.length<6) return \"Try increasing the timeframe.\";\n  const sampleCount = response.values.length-5;\n  let percentChangeMetric = 0;\n  let percentChangeTraffic = 0;\n  let trafficAVG = 0;\n  let metricAVG = 0;\n  let metricAAVG = 0;\n  let metricBAVG = 0;\n  let trafficAAVG = 0;\n  let trafficBAVG = 0;\n  let c = 0;\n  while (c < sampleCount) {\n    trafficAVG = trafficAVG + response.values[c][1];\n    metricAVG = metricAVG + response.values[c][2];\n    c++;\n  }\n  let i2 = 0;\n  let i2A = 0;\n  let i2B = 0;\n  while (i2 < sampleCount) {\n    if (response.values[i2][1]>(trafficAVG/sampleCount))\n      {\n        metricAAVG=metricAAVG+response.values[i2][2];\n        trafficAAVG=trafficAAVG+response.values[i2][1];\n        i2A++;\n      }\n    if (response.values[i2][1]<(trafficAVG/sampleCount)) \n      {\n        metricBAVG=metricBAVG+response.values[i2][2];\n        trafficBAVG=trafficBAVG+response.values[i2][1];\n        i2B++;\n      }\n    i2++;\n  }\n  if ((metricBAVG/i2B)==0) return \"0.00%\";\n  percentChangeMetric = ((Number(metricAAVG/i2A) - Number(metricBAVG/i2B))/Number(metricBAVG/i2B))*100;\n  return (percentChangeMetric+((percentChangeMetric*$TrafficChangePercent/100))).toFixed(2)+\"%\"\n}","visualization":"singleValue","visualizationSettings":{"thresholds":[],"chartSettings":{"gapPolicy":"connect","circleChartSettings":{"groupingThresholdType":"relative","groupingThresholdValue":0,"valueType":"relative"},"categoryOverrides":{}},"singleValue":{"showLabel":false,"label":"","prefixIcon":"","autoscale":true,"alignment":"start"},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"lineWrapIds":[],"columnWidths":{}},"unitsOverrides":[{"identifier":"Diff","unitCategory":"unspecified","baseUnit":"none","displayUnit":null,"decimals":2,"suffix":"","delimiter":false,"added":1701281148734}]}},"20":{"type":"code","title":"JavaScript Error Impact","input":"import { rumUserSessionsClient } from \"@dynatrace-sdk/client-classic-environment-v1\";\nexport default async function () {\n  const metric = \"javascriptErrorCount\";\n  const metricName = \"Error Rate\";\n  const startTime = Date.parse($dt_timeframe_from).toString();  // Get Dashboard Start Time\n  const endTime = Date.parse($dt_timeframe_to).toString();      // Get Dashboard End Time\n  // Calculate Chart Interval\n  const timeDiff = (endTime-startTime)/3600/1000/24;\n  var chartInterval = \"1m\"\n  var appsList = \"\\\"\"+$AppName[0]+\"\\\"\";\n  let i = 1;\n  // Build Apps List\n  while (i < 10) {\n    if ($AppName[i]==null) break;\n    appsList = appsList+\",\\\"\"+$AppName[i]+\"\\\"\";\n    i++;\n  }\n  var usqlQuery = 'SELECT DISTINCT DATETIME(endTime,  \"MM-dd HH:mm:ss\",\"'+chartInterval+'\") AS \"Date\", count(*) AS \"Count\", avg('+metric+') AS \"Metric\" from useraction WHERE useraction.application in ('+appsList+') and usersession.starttime>='+startTime+' and usersession.endtime<='+endTime+' limit 5000';\n  if ($ActionType==\"Key\") usqlQuery = 'SELECT DISTINCT DATETIME(endTime,  \"MM-dd HH:mm:ss\",\"'+chartInterval+'\") AS \"Date\", count(*) AS \"Count\", avg('+metric+') AS \"Metric\" from useraction WHERE useraction.application in ('+appsList+') and usersession.starttime>='+startTime+' and usersession.endtime<='+endTime+' and keyuseraction is true limit 5000';\n  if ($ActionType==\"Entry\") usqlQuery = 'SELECT DISTINCT DATETIME(endTime,  \"MM-dd HH:mm:ss\",\"'+chartInterval+'\") AS \"Date\", count(*) AS \"Count\", avg('+metric+') AS \"Metric\" from useraction WHERE useraction.application in ('+appsList+') and usersession.starttime>='+startTime+' and usersession.endtime<='+endTime+' and isentryaction is true  limit 5000';\n  if ($ActionType==\"Exit\") usqlQuery = 'SELECT DISTINCT DATETIME(endTime,  \"MM-dd HH:mm:ss\",\"'+chartInterval+'\") AS \"Date\", count(*) AS \"Count\", avg('+metric+') AS \"Metric\" from useraction WHERE useraction.application in ('+appsList+') and usersession.starttime>='+startTime+' and usersession.endtime<='+endTime+' and isexitaction is true limit 5000';\n  const response = await rumUserSessionsClient.getUsqlResultAsTable({query: usqlQuery, startTimestamp: startTime, endTimestamp: endTime});\n  if (response.values.length<6) return \"Try increasing the timeframe.\";\n  const sampleCount = response.values.length-5;\n  let percentChangeMetric = 0;\n  let percentChangeTraffic = 0;\n  let trafficAVG = 0;\n  let metricAVG = 0;\n  let metricAAVG = 0;\n  let metricBAVG = 0;\n  let trafficAAVG = 0;\n  let trafficBAVG = 0;\n  let c = 0;\n  while (c < sampleCount) {\n    trafficAVG = trafficAVG + response.values[c][1];\n    metricAVG = metricAVG + response.values[c][2];\n    c++;\n  }\n  let i2 = 0;\n  let i2A = 0;\n  let i2B = 0;\n  while (i2 < sampleCount) {\n    if (response.values[i2][1]>(trafficAVG/sampleCount))\n      {\n        metricAAVG=metricAAVG+response.values[i2][2];\n        trafficAAVG=trafficAAVG+response.values[i2][1];\n        i2A++;\n      }\n    if (response.values[i2][1]<(trafficAVG/sampleCount)) \n      {\n        metricBAVG=metricBAVG+response.values[i2][2];\n        trafficBAVG=trafficBAVG+response.values[i2][1];\n        i2B++;\n      }\n    i2++;\n  }\n  percentChangeMetric = (Number(metricAAVG/i2A) - Number(metricBAVG/i2B))/Number(metricBAVG/i2B)*100;\n  percentChangeTraffic = (Number(trafficAAVG/i2A) - Number(trafficBAVG/i2B))/Number(trafficBAVG/i2B)*100;\n  let newChangeMetric = (percentChangeMetric+((percentChangeMetric*$TrafficChangePercent/100))).toFixed(2);\n  var predictedMetric=((metricAVG/sampleCount+((metricAVG/sampleCount)*((percentChangeMetric+((percentChangeMetric*$TrafficChangePercent/100)))/100))));\n  if (predictedMetric<0) predictedMetric=0;\n  if (newChangeMetric>3) \n    {\n      return metricName+\" is \"+Number((metricAVG/sampleCount)*100).toFixed(2)+\". Predicted \"+metricName+\" is \"+(predictedMetric*100).toFixed(2)+\" modeled with a \"+$TrafficChangePercent+\"% traffic increase.\";\n    }\n  if (newChangeMetric<-3)\n    {\n      return metricName+\" is \"+Number((metricAVG/sampleCount)*100).toFixed(2)+\". Predicted \"+metricName+\" is \"+(predictedMetric*100).toFixed(2)+\" modeled with a \"+$TrafficChangePercent+\"% traffic increase.\";\n    }\n  return \"There will be no noticable change in \"+metricName+\".\";\n}","visualization":"singleValue","visualizationSettings":{"thresholds":[],"chartSettings":{"gapPolicy":"connect","circleChartSettings":{"groupingThresholdType":"relative","groupingThresholdValue":0,"valueType":"relative"},"categoryOverrides":{}},"singleValue":{"showLabel":false,"label":"","prefixIcon":"","autoscale":true,"alignment":"start"},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"lineWrapIds":[],"columnWidths":{}},"unitsOverrides":[{"identifier":"Diff","unitCategory":"unspecified","baseUnit":"none","displayUnit":null,"decimals":2,"suffix":"","delimiter":false,"added":1701281148734}]}},"21":{"type":"code","title":"JavaScript Error Health","input":"import { rumUserSessionsClient } from \"@dynatrace-sdk/client-classic-environment-v1\";\nexport default async function () {\n  const metric = \"javascriptErrorCount\";\n  const startTime = Date.parse($dt_timeframe_from).toString();  // Get Dashboard Start Time\n  const endTime = Date.parse($dt_timeframe_to).toString();      // Get Dashboard End Time\n  // Calculate Chart Interval\n  const timeDiff = (endTime-startTime)/3600/1000/24;\n  var chartInterval = \"1m\"\n  var appsList = \"\\\"\"+$AppName[0]+\"\\\"\";\n  let i = 1;\n  // Build Apps List\n  while (i < 10) {\n    if ($AppName[i]==null) break;\n    appsList = appsList+\",\\\"\"+$AppName[i]+\"\\\"\";\n    i++;\n  }\n  var usqlQuery = 'SELECT DISTINCT DATETIME(endTime,  \"MM-dd HH:mm:ss\",\"'+chartInterval+'\") AS \"Date\", count(*) AS \"Count\", avg('+metric+') AS \"Metric\" from useraction WHERE useraction.application in ('+appsList+') and usersession.starttime>='+startTime+' and usersession.endtime<='+endTime+' limit 5000';\n  if ($ActionType==\"Key\") usqlQuery = 'SELECT DISTINCT DATETIME(endTime,  \"MM-dd HH:mm:ss\",\"'+chartInterval+'\") AS \"Date\", count(*) AS \"Count\", avg('+metric+') AS \"Metric\" from useraction WHERE useraction.application in ('+appsList+') and usersession.starttime>='+startTime+' and usersession.endtime<='+endTime+' and keyuseraction is true limit 5000';\n  if ($ActionType==\"Entry\") usqlQuery = 'SELECT DISTINCT DATETIME(endTime,  \"MM-dd HH:mm:ss\",\"'+chartInterval+'\") AS \"Date\", count(*) AS \"Count\", avg('+metric+') AS \"Metric\" from useraction WHERE useraction.application in ('+appsList+') and usersession.starttime>='+startTime+' and usersession.endtime<='+endTime+' and isentryaction is true  limit 5000';\n  if ($ActionType==\"Exit\") usqlQuery = 'SELECT DISTINCT DATETIME(endTime,  \"MM-dd HH:mm:ss\",\"'+chartInterval+'\") AS \"Date\", count(*) AS \"Count\", avg('+metric+') AS \"Metric\" from useraction WHERE useraction.application in ('+appsList+') and usersession.starttime>='+startTime+' and usersession.endtime<='+endTime+' and isexitaction is true limit 5000';\n  const response = await rumUserSessionsClient.getUsqlResultAsTable({query: usqlQuery, startTimestamp: startTime, endTimestamp: endTime});\n  if (response.values.length<6) return \"Try increasing the timeframe.\";\n  const sampleCount = response.values.length-5;\n  let percentChangeMetric = 0;\n  let percentChangeTraffic = 0;\n  let trafficAVG = 0;\n  let metricAVG = 0;\n  let metricAAVG = 0;\n  let metricBAVG = 0;\n  let trafficAAVG = 0;\n  let trafficBAVG = 0;\n  let c = 0;\n  while (c < sampleCount) {\n    trafficAVG = trafficAVG + response.values[c][1];\n    metricAVG = metricAVG + response.values[c][2];\n    c++;\n  }\n  let i2 = 0;\n  let i2A = 0;\n  let i2B = 0;\n  while (i2 < sampleCount) {\n    if (response.values[i2][1]>(trafficAVG/sampleCount))\n      {\n        metricAAVG=metricAAVG+response.values[i2][2];\n        trafficAAVG=trafficAAVG+response.values[i2][1];\n        i2A++;\n      }\n    if (response.values[i2][1]<(trafficAVG/sampleCount)) \n      {\n        metricBAVG=metricBAVG+response.values[i2][2];\n        trafficBAVG=trafficBAVG+response.values[i2][1];\n        i2B++;\n      }\n    i2++;\n  }\n  percentChangeMetric = ((Number(metricAAVG/i2A) - Number(metricBAVG/i2B))/Number(metricBAVG/i2B))*100;\n  if ((percentChangeMetric+((percentChangeMetric*$TrafficChangePercent/100)))>3) return \"🔴\";\n  if ((percentChangeMetric+((percentChangeMetric*$TrafficChangePercent/100)))>0) return \"🟡\";\n  return \"🟢\"\n}","visualization":"singleValue","visualizationSettings":{"thresholds":[],"chartSettings":{"gapPolicy":"connect","circleChartSettings":{"groupingThresholdType":"relative","groupingThresholdValue":0,"valueType":"relative"},"categoryOverrides":{}},"singleValue":{"showLabel":false,"label":"","prefixIcon":"","autoscale":true,"alignment":"center"},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"lineWrapIds":[],"columnWidths":{}},"unitsOverrides":[{"identifier":"Diff","unitCategory":"unspecified","baseUnit":"none","displayUnit":null,"decimals":2,"suffix":"","delimiter":false,"added":1701281148734}]}},"22":{"type":"code","title":"Overall Health","input":"import { rumUserSessionsClient } from \"@dynatrace-sdk/client-classic-environment-v1\";\nexport default async function () {\n  var metric = \"duration\";\n  var chartInterval = \"1m\";\n  var healthCount = 0;\n  const startTime = Date.parse($dt_timeframe_from).toString();  // Get Dashboard Start Time\n  const endTime = Date.parse($dt_timeframe_to).toString();      // Get Dashboard End Time\n  var appsList = \"\\\"\"+$AppName[0]+\"\\\"\";\n  var i = 1;\n  // Build Apps List\n  while (i < 10) {\n    if ($AppName[i]==null) break;\n    appsList = appsList+\",\\\"\"+$AppName[i]+\"\\\"\";\n    i++;\n  }\n  var h = 1;\n  while (h < 4) {\n    if (h==2) metric=\"requestErrorCount\";\n    if (h==3) metric=\"javascriptErrorCount\";\n    // Build Query List\n    var usqlQuery = 'SELECT DISTINCT DATETIME(endTime,  \"MM-dd HH:mm:ss\",\"'+chartInterval+'\") AS \"Date\", count(*) AS \"Count\", avg('+metric+') AS \"Metric\" from useraction WHERE useraction.application in ('+appsList+') and usersession.starttime>='+startTime+' and usersession.endtime<='+endTime+' limit 5000';\n    if ($ActionType==\"Key\") usqlQuery = 'SELECT DISTINCT DATETIME(endTime,  \"MM-dd HH:mm:ss\",\"'+chartInterval+'\") AS \"Date\", count(*) AS \"Count\", avg('+metric+') AS \"Metric\" from useraction WHERE useraction.application in ('+appsList+') and usersession.starttime>='+startTime+' and usersession.endtime<='+endTime+' and keyuseraction is true limit 5000';\n    if ($ActionType==\"Entry\") usqlQuery = 'SELECT DISTINCT DATETIME(endTime,  \"MM-dd HH:mm:ss\",\"'+chartInterval+'\") AS \"Date\", count(*) AS \"Count\", avg('+metric+') AS \"Metric\" from useraction WHERE useraction.application in ('+appsList+') and usersession.starttime>='+startTime+' and usersession.endtime<='+endTime+' and isentryaction is true  limit 5000';\n    if ($ActionType==\"Exit\") usqlQuery = 'SELECT DISTINCT DATETIME(endTime,  \"MM-dd HH:mm:ss\",\"'+chartInterval+'\") AS \"Date\", count(*) AS \"Count\", avg('+metric+') AS \"Metric\" from useraction WHERE useraction.application in ('+appsList+') and usersession.starttime>='+startTime+' and usersession.endtime<='+endTime+' and isexitaction is true limit 5000';\n    var response = await rumUserSessionsClient.getUsqlResultAsTable({query: usqlQuery, startTimestamp: startTime, endTimestamp: endTime});\n    if (response.values.length<6) return \"Try increasing the timeframe.\";\n    var sampleCount = response.values.length-5;\n    var percentChangeMetric = 0;\n    var percentChangeTraffic = 0;\n    var trafficAVG = 0;\n    var metricAVG = 0;\n    var metricAAVG = 0;\n    var metricBAVG = 0;\n    var trafficAAVG = 0;\n    var trafficBAVG = 0;\n    var c = 0;\n    // Get Traffic and Metric Averages\n    while (c < sampleCount) {\n      trafficAVG = trafficAVG + response.values[c][1];\n      metricAVG = metricAVG + response.values[c][2];\n      c++;\n    }\n    var i2 = 0;\n    var i2A = 0;\n    var i2B = 0;\n    // Calculate mertric average above and below traffic average\n    while (i2 < sampleCount) {\n      if (response.values[i2][1]>(trafficAVG/sampleCount))\n        {\n          metricAAVG=metricAAVG+response.values[i2][2];\n          trafficAAVG=trafficAAVG+response.values[i2][1];\n          i2A++;\n        }\n      if (response.values[i2][1]<(trafficAVG/sampleCount)) \n        {\n          metricBAVG=metricBAVG+response.values[i2][2];\n          trafficBAVG=trafficBAVG+response.values[i2][1];\n          i2B++;\n        }\n      i2++;\n    }\n    // Calculate percent change of metric average below and above traffic average and update overall health\n    percentChangeMetric = ((Number(metricAAVG/i2A) - Number(metricBAVG/i2B))/Number(metricBAVG/i2B))*100;\n    if ((percentChangeMetric+((percentChangeMetric*$TrafficChangePercent/100)))>3) healthCount=healthCount+2;\n    else if ((percentChangeMetric+((percentChangeMetric*$TrafficChangePercent/100)))>0) healthCount=healthCount+1;\n  h++;\n  }\n  //  return health status icon\n  if (healthCount>1) return \"🔴\";\n  if (healthCount>0) return \"🟡\";\n  return \"🟢\"\n}","visualization":"singleValue","visualizationSettings":{"thresholds":[],"chartSettings":{"gapPolicy":"connect","circleChartSettings":{"groupingThresholdType":"relative","groupingThresholdValue":0,"valueType":"relative"},"categoryOverrides":{}},"singleValue":{"showLabel":false,"label":"","prefixIcon":"","autoscale":true,"alignment":"center"},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"lineWrapIds":[],"columnWidths":{}},"unitsOverrides":[{"identifier":"Diff","unitCategory":"unspecified","baseUnit":"none","displayUnit":null,"decimals":2,"suffix":"","delimiter":false,"added":1701281148734}]}},"24":{"type":"code","title":"Request Error Rate Distribution Below/Above Traffic Average","input":"import { rumUserSessionsClient } from \"@dynatrace-sdk/client-classic-environment-v1\";\nexport default async function () {\n  const startTime = Date.parse($dt_timeframe_from).toString();  // Get Dashboard Start Time\n  const endTime = Date.parse($dt_timeframe_to).toString();      // Get Dashboard End Time\n  // Calculate Chart Interval\n  const timeDiff = (endTime-startTime)/3600/1000/24;\n  var chartInterval = \"1m\"\n  var appsList = \"\\\"\"+$AppName[0]+\"\\\"\";\n  let i = 1;\n  // Build Apps List\n  while (i < 10) {\n    if ($AppName[i]==null) break;\n    appsList = appsList+\",\\\"\"+$AppName[i]+\"\\\"\";\n    i++;\n  }\n  var usqlQuery = 'SELECT DISTINCT DATETIME(endTime,  \"MM-dd HH:mm:ss\",\"'+chartInterval+'\") AS \"Date\", count(*) AS \"Count\", avg(requesterrorcount) AS \"Errors\" from useraction WHERE useraction.application in ('+appsList+') and usersession.starttime>='+startTime+' and usersession.endtime<='+endTime+' limit 5000';\n  if ($ActionType==\"Key\") usqlQuery = 'SELECT DISTINCT DATETIME(endTime,  \"MM-dd HH:mm:ss\",\"'+chartInterval+'\") AS \"Date\", count(*) AS \"Count\", avg(requesterrorcount) AS \"Errors\" from useraction WHERE useraction.application in ('+appsList+') and usersession.starttime>='+startTime+' and usersession.endtime<='+endTime+' and keyuseraction is true limit 5000';\n  if ($ActionType==\"Entry\") usqlQuery = 'SELECT DISTINCT DATETIME(endTime,  \"MM-dd HH:mm:ss\",\"'+chartInterval+'\") AS \"Date\", count(*) AS \"Count\", avg(requesterrorcount) AS \"Errors\" from useraction WHERE useraction.application in ('+appsList+') and usersession.starttime>='+startTime+' and usersession.endtime<='+endTime+' and isentryaction is true  limit 5000';\n  if ($ActionType==\"Exit\") usqlQuery = 'SELECT DISTINCT DATETIME(endTime,  \"MM-dd HH:mm:ss\",\"'+chartInterval+'\") AS \"Date\", count(*) AS \"Count\", avg(requesterrorcount) AS \"Errors\" from useraction WHERE useraction.application in ('+appsList+') and usersession.starttime>='+startTime+' and usersession.endtime<='+endTime+' and isexitaction is true limit 5000';\n  const response = await rumUserSessionsClient.getUsqlResultAsTable({query: usqlQuery, startTimestamp: startTime, endTimestamp: endTime});\n  const sampleCount = response.values.length-5;\n  let percentChangeDuration = 0;\n  let percentChangeTraffic = 0;\n  let trafficAVG = 0;\n  let durationAVG = 0;\n  let durationAAVG = 0;\n  let durationBAVG = 0;\n  let trafficAAVG = 0;\n  let trafficBAVG = 0;\n  let durationMAX = response.values[0][2];\n  let durationMIN = response.values[0][2];\n  let c = 0;\n  while (c < sampleCount) {\n    trafficAVG = trafficAVG + response.values[c][1];\n    durationAVG = durationAVG + response.values[c][2];\n    if (response.values[c][2]>durationMAX) durationMAX=response.values[c][2];\n    if (response.values[c][2]<durationMIN) durationMIN=response.values[c][2];\n    c++;\n  }\n  let i2 = 0;\n  let i2A = 0;\n  let i2B = 0;\n  while (i2 < sampleCount) {\n    if (response.values[i2][1]>(trafficAVG/sampleCount))\n      {\n        durationAAVG=durationAAVG+response.values[i2][2];\n        trafficAAVG=trafficAAVG+response.values[i2][1];\n        i2A++;\n      }\n    if (response.values[i2][1]<(trafficAVG/sampleCount)) \n      {\n        durationBAVG=durationBAVG+response.values[i2][2];\n        trafficBAVG=trafficBAVG+response.values[i2][1];\n        i2B++;\n      }\n    i2++;\n  }\nreturn {\n    records: [\n     {\n        'Traffic': \"Below Average\",\n        'Errors': ((durationBAVG/i2B)*100)\n      },\n    {   'Traffic': \"Average\",\n        'Errors': ((durationAVG/sampleCount)*100)\n      },\n    {   'Traffic': \"Above Average\",\n        'Errors': ((durationAAVG/i2A)*100)\n      },\n],\n    types: [\n      {\n        indexRange: [0, 2],\n        mappings: {\n          'Traffic': { type: 'string' },\n          'Errors': { type: 'double' }\n        },\n      },\n    ],\n  };\n}","visualization":"categoricalBarChart","visualizationSettings":{"thresholds":[],"chartSettings":{"gapPolicy":"connect","circleChartSettings":{"groupingThresholdType":"relative","groupingThresholdValue":0,"valueType":"relative"},"categoryOverrides":{"Below Average":{"color":"var(--dt-colors-charts-categorical-color-03-default, #2a7453)","added":1702149388683},"Above Average":{"color":"var(--dt-colors-charts-security-risk-level-critical-default, #8a0012)","added":1702149391362},"Average":{"color":"var(--dt-colors-charts-categorical-color-06-default, #a9780f)","added":1702149394566}},"categoricalBarChartSettings":{"categoryAxis":"Traffic","categoryAxisLabel":"","valueAxis":"Errors","valueAxisLabel":"Error Rate"},"legend":{"hidden":true}},"singleValue":{"showLabel":true,"label":"","prefixIcon":"","autoscale":true,"alignment":"center"},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"lineWrapIds":[],"columnWidths":{}}}},"25":{"type":"code","title":"JavaScript Error Rate Distribution Below/Above Traffic Average","input":"import { rumUserSessionsClient } from \"@dynatrace-sdk/client-classic-environment-v1\";\nexport default async function () {\n  const startTime = Date.parse($dt_timeframe_from).toString();  // Get Dashboard Start Time\n  const endTime = Date.parse($dt_timeframe_to).toString();      // Get Dashboard End Time\n  // Calculate Chart Interval\n  const timeDiff = (endTime-startTime)/3600/1000/24;\n  var chartInterval = \"1m\"\n  var appsList = \"\\\"\"+$AppName[0]+\"\\\"\";\n  let i = 1;\n  // Build Apps List\n  while (i < 10) {\n    if ($AppName[i]==null) break;\n    appsList = appsList+\",\\\"\"+$AppName[i]+\"\\\"\";\n    i++;\n  }\n  var usqlQuery = 'SELECT DISTINCT DATETIME(endTime,  \"MM-dd HH:mm:ss\",\"'+chartInterval+'\") AS \"Date\", count(*) AS \"Count\", avg(javascripterrorcount) AS \"Errors\" from useraction WHERE useraction.application in ('+appsList+') and usersession.starttime>='+startTime+' and usersession.endtime<='+endTime+' limit 5000';\n  if ($ActionType==\"Key\") usqlQuery = 'SELECT DISTINCT DATETIME(endTime,  \"MM-dd HH:mm:ss\",\"'+chartInterval+'\") AS \"Date\", count(*) AS \"Count\", avg(javascripterrorcount) AS \"Errors\" from useraction WHERE useraction.application in ('+appsList+') and usersession.starttime>='+startTime+' and usersession.endtime<='+endTime+' and keyuseraction is true limit 5000';\n  if ($ActionType==\"Entry\") usqlQuery = 'SELECT DISTINCT DATETIME(endTime,  \"MM-dd HH:mm:ss\",\"'+chartInterval+'\") AS \"Date\", count(*) AS \"Count\", avg(javascripterrorcount) AS \"Errors\" from useraction WHERE useraction.application in ('+appsList+') and usersession.starttime>='+startTime+' and usersession.endtime<='+endTime+' and isentryaction is true  limit 5000';\n  if ($ActionType==\"Exit\") usqlQuery = 'SELECT DISTINCT DATETIME(endTime,  \"MM-dd HH:mm:ss\",\"'+chartInterval+'\") AS \"Date\", count(*) AS \"Count\", avg(javascripterrorcount) AS \"Errors\" from useraction WHERE useraction.application in ('+appsList+') and usersession.starttime>='+startTime+' and usersession.endtime<='+endTime+' and isexitaction is true limit 5000';\n  const response = await rumUserSessionsClient.getUsqlResultAsTable({query: usqlQuery, startTimestamp: startTime, endTimestamp: endTime});\n  const sampleCount = response.values.length-5;\n  let percentChangeDuration = 0;\n  let percentChangeTraffic = 0;\n  let trafficAVG = 0;\n  let durationAVG = 0;\n  let durationAAVG = 0;\n  let durationBAVG = 0;\n  let trafficAAVG = 0;\n  let trafficBAVG = 0;\n  let durationMAX = response.values[0][2];\n  let durationMIN = response.values[0][2];\n  let c = 0;\n  while (c < sampleCount) {\n    trafficAVG = trafficAVG + response.values[c][1];\n    durationAVG = durationAVG + response.values[c][2];\n    if (response.values[c][2]>durationMAX) durationMAX=response.values[c][2];\n    if (response.values[c][2]<durationMIN) durationMIN=response.values[c][2];\n    c++;\n  }\n  let i2 = 0;\n  let i2A = 0;\n  let i2B = 0;\n  while (i2 < sampleCount) {\n    if (response.values[i2][1]>(trafficAVG/sampleCount))\n      {\n        durationAAVG=durationAAVG+response.values[i2][2];\n        trafficAAVG=trafficAAVG+response.values[i2][1];\n        i2A++;\n      }\n    if (response.values[i2][1]<(trafficAVG/sampleCount)) \n      {\n        durationBAVG=durationBAVG+response.values[i2][2];\n        trafficBAVG=trafficBAVG+response.values[i2][1];\n        i2B++;\n      }\n    i2++;\n  }\nreturn {\n    records: [\n     {\n        'Traffic': \"Below Average\",\n        'Errors': ((durationBAVG/i2B)*100)\n      },\n    {   'Traffic': \"Average\",\n        'Errors': ((durationAVG/sampleCount)*100)\n      },\n    {   'Traffic': \"Above Average\",\n        'Errors': ((durationAAVG/i2A)*100)\n      },\n],\n    types: [\n      {\n        indexRange: [0, 2],\n        mappings: {\n          'Traffic': { type: 'string' },\n          'Errors': { type: 'double' }\n        },\n      },\n    ],\n  };\n}","visualization":"categoricalBarChart","visualizationSettings":{"thresholds":[],"chartSettings":{"gapPolicy":"connect","circleChartSettings":{"groupingThresholdType":"relative","groupingThresholdValue":0,"valueType":"relative"},"categoryOverrides":{"Below Average":{"color":"var(--dt-colors-charts-categorical-color-03-default, #2a7453)","added":1702149388683},"Above Average":{"color":"var(--dt-colors-charts-security-risk-level-critical-default, #8a0012)","added":1702149391362},"Average":{"color":"var(--dt-colors-charts-categorical-color-06-default, #a9780f)","added":1702149394566}},"categoricalBarChartSettings":{"categoryAxis":"Traffic","categoryAxisLabel":"","valueAxis":"Errors","valueAxisLabel":"Error Rate"},"legend":{"hidden":true}},"singleValue":{"showLabel":true,"label":"","prefixIcon":"","autoscale":true,"alignment":"center"},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"lineWrapIds":[],"columnWidths":{}}}},"26":{"type":"code","title":"Traffic vs Request Errors","input":"import { rumUserSessionsClient } from \"@dynatrace-sdk/client-classic-environment-v1\";\nexport default async function () {\n  const startTime = Date.parse($dt_timeframe_from).toString();  // Get Dashboard Start Time\n  const endTime = Date.parse($dt_timeframe_to).toString();      // Get Dashboard End Time\n  // Calculate Chart Interval\n  const timeDiff = (endTime-startTime)/3600/1000/24;\n  var chartInterval = \"1m\"\n  var appsList = \"\\\"\"+$AppName[0]+\"\\\"\";\n  let i = 1;\n  // Build Apps List\n  while (i < 10) {\n    if ($AppName[i]==null) break;\n    appsList = appsList+\",\\\"\"+$AppName[i]+\"\\\"\";\n    i++;\n  }\n  var usqlQuery = 'SELECT DISTINCT DATETIME(endTime,  \"MM-dd HH:mm:ss\",\"'+chartInterval+'\") AS \"Date\", count(*) AS \"Count\", avg(requesterrorcount) AS \"Duration\" from useraction WHERE useraction.application in ('+appsList+') and usersession.starttime>='+startTime+' and usersession.endtime<='+endTime+' limit 5000';\n  if ($ActionType==\"Key\") usqlQuery = 'SELECT DISTINCT DATETIME(endTime,  \"MM-dd HH:mm:ss\",\"'+chartInterval+'\") AS \"Date\", count(*) AS \"Count\", avg(requesterrorcount) AS \"Duration\" from useraction WHERE useraction.application in ('+appsList+') and usersession.starttime>='+startTime+' and usersession.endtime<='+endTime+' and keyuseraction is true limit 5000';\n  if ($ActionType==\"Entry\") usqlQuery = 'SELECT DISTINCT DATETIME(endTime,  \"MM-dd HH:mm:ss\",\"'+chartInterval+'\") AS \"Date\", count(*) AS \"Count\", avg(requesterrorcount) AS \"Duration\" from useraction WHERE useraction.application in ('+appsList+') and usersession.starttime>='+startTime+' and usersession.endtime<='+endTime+' and isentryaction is true  limit 5000';\n  if ($ActionType==\"Exit\") usqlQuery = 'SELECT DISTINCT DATETIME(endTime,  \"MM-dd HH:mm:ss\",\"'+chartInterval+'\") AS \"Date\", count(*) AS \"Count\", avg(requesterrorcount) AS \"Duration\" from useraction WHERE useraction.application in ('+appsList+') and usersession.starttime>='+startTime+' and usersession.endtime<='+endTime+' and isexitaction is true limit 5000';\n  const response = await rumUserSessionsClient.getUsqlResultAsTable({query: usqlQuery, startTimestamp: startTime, endTimestamp: endTime});\n  const sampleCount = response.values.length-5;\n  return {\n    records: new Array(sampleCount).fill(null).map((_, index, array) => {\n      return {\n        Date: response.values[index][0],\n        'Traffic': response.values[index][1],\n        'Errors': response.values[index][2]*100      };\n    }),\n    types: [\n      {\n        indexRange: [0, sampleCount],\n        mappings: {\n         Date: { type: 'timestamp' },\n          'Traffic': { type: 'double' },\n          'Errors': { type: 'double' }\n        },\n      },\n    ],\n  };\n}","visualization":"lineChart","visualizationSettings":{"thresholds":[{"id":1,"field":"","title":"","isEnabled":true,"rules":[{"id":0,"color":{"Default":"var(--dt-colors-charts-categorical-color-09-default, #649438)"},"comparator":"≥","label":""},{"id":1,"color":{"Default":"var(--dt-colors-charts-categorical-color-14-default, #d56b1a)"},"comparator":"≥","label":""},{"id":2,"color":{"Default":"var(--dt-colors-charts-categorical-color-12-default, #cd3741)"},"comparator":"≥","label":""}]}],"chartSettings":{"gapPolicy":"connect","circleChartSettings":{"groupingThresholdType":"relative","groupingThresholdValue":0,"valueType":"relative"},"categoryOverrides":{},"legend":{"position":"bottom","hidden":false},"seriesOverrides":[{"seriesId":["Errors"],"override":{"color":{"Default":"var(--dt-colors-charts-security-risk-level-critical-default, #8a0012)"}}},{"seriesId":["Traffic"],"override":{"color":{"Default":"var(--dt-colors-charts-categorical-color-01-default, #134fc9)"}}}]},"singleValue":{"showLabel":true,"label":"","prefixIcon":"","autoscale":true,"alignment":"center"},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"lineWrapIds":[],"columnWidths":{}},"unitsOverrides":[{"identifier":"Diff","unitCategory":"unspecified","baseUnit":"none","displayUnit":null,"decimals":2,"suffix":"","delimiter":false,"added":1701281148734}]}},"27":{"type":"code","title":"Traffic vs JavaScript Errors","input":"import { rumUserSessionsClient } from \"@dynatrace-sdk/client-classic-environment-v1\";\nexport default async function () {\n  const startTime = Date.parse($dt_timeframe_from).toString();  // Get Dashboard Start Time\n  const endTime = Date.parse($dt_timeframe_to).toString();      // Get Dashboard End Time\n  // Calculate Chart Interval\n  const timeDiff = (endTime-startTime)/3600/1000/24;\n  var chartInterval = \"1m\"\n  var appsList = \"\\\"\"+$AppName[0]+\"\\\"\";\n  let i = 1;\n  // Build Apps List\n  while (i < 10) {\n    if ($AppName[i]==null) break;\n    appsList = appsList+\",\\\"\"+$AppName[i]+\"\\\"\";\n    i++;\n  }\n  var usqlQuery = 'SELECT DISTINCT DATETIME(endTime,  \"MM-dd HH:mm:ss\",\"'+chartInterval+'\") AS \"Date\", count(*) AS \"Count\", avg(javascripterrorcount) AS \"Duration\" from useraction WHERE useraction.application in ('+appsList+') and usersession.starttime>='+startTime+' and usersession.endtime<='+endTime+' limit 5000';\n  if ($ActionType==\"Key\") usqlQuery = 'SELECT DISTINCT DATETIME(endTime,  \"MM-dd HH:mm:ss\",\"'+chartInterval+'\") AS \"Date\", count(*) AS \"Count\", avg(javascripterrorcount) AS \"Duration\" from useraction WHERE useraction.application in ('+appsList+') and usersession.starttime>='+startTime+' and usersession.endtime<='+endTime+' and keyuseraction is true limit 5000';\n  if ($ActionType==\"Entry\") usqlQuery = 'SELECT DISTINCT DATETIME(endTime,  \"MM-dd HH:mm:ss\",\"'+chartInterval+'\") AS \"Date\", count(*) AS \"Count\", avg(javascripterrorcount) AS \"Duration\" from useraction WHERE useraction.application in ('+appsList+') and usersession.starttime>='+startTime+' and usersession.endtime<='+endTime+' and isentryaction is true  limit 5000';\n  if ($ActionType==\"Exit\") usqlQuery = 'SELECT DISTINCT DATETIME(endTime,  \"MM-dd HH:mm:ss\",\"'+chartInterval+'\") AS \"Date\", count(*) AS \"Count\", avg(javascripterrorcount) AS \"Duration\" from useraction WHERE useraction.application in ('+appsList+') and usersession.starttime>='+startTime+' and usersession.endtime<='+endTime+' and isexitaction is true limit 5000';\n  const response = await rumUserSessionsClient.getUsqlResultAsTable({query: usqlQuery, startTimestamp: startTime, endTimestamp: endTime});\n  const sampleCount = response.values.length-5;\n  return {\n    records: new Array(sampleCount).fill(null).map((_, index, array) => {\n      return {\n        Date: response.values[index][0],\n        'Traffic': response.values[index][1],\n        'Errors': response.values[index][2]*100      };\n    }),\n    types: [\n      {\n        indexRange: [0, sampleCount],\n        mappings: {\n         Date: { type: 'timestamp' },\n          'Traffic': { type: 'double' },\n          'Errors': { type: 'double' }\n        },\n      },\n    ],\n  };\n}","visualization":"lineChart","visualizationSettings":{"thresholds":[{"id":1,"field":"","title":"","isEnabled":true,"rules":[{"id":0,"color":{"Default":"var(--dt-colors-charts-categorical-color-09-default, #649438)"},"comparator":"≥","label":""},{"id":1,"color":{"Default":"var(--dt-colors-charts-categorical-color-14-default, #d56b1a)"},"comparator":"≥","label":""},{"id":2,"color":{"Default":"var(--dt-colors-charts-categorical-color-12-default, #cd3741)"},"comparator":"≥","label":""}]}],"chartSettings":{"gapPolicy":"connect","circleChartSettings":{"groupingThresholdType":"relative","groupingThresholdValue":0,"valueType":"relative"},"categoryOverrides":{},"legend":{"position":"bottom","hidden":false},"seriesOverrides":[{"seriesId":["Errors"],"override":{"color":{"Default":"var(--dt-colors-charts-security-risk-level-critical-default, #8a0012)"}}},{"seriesId":["Traffic"],"override":{"color":{"Default":"var(--dt-colors-charts-categorical-color-01-default, #134fc9)"}}}]},"singleValue":{"showLabel":true,"label":"","prefixIcon":"","autoscale":true,"alignment":"center"},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"lineWrapIds":[],"columnWidths":{}},"unitsOverrides":[{"identifier":"Diff","unitCategory":"unspecified","baseUnit":"none","displayUnit":null,"decimals":2,"suffix":"","delimiter":false,"added":1701281148734}]}}},"layouts":{"0":{"x":0,"y":20,"w":24,"h":6},"2":{"x":3,"y":4,"w":21,"h":2},"5":{"x":0,"y":4,"w":3,"h":2},"7":{"x":0,"y":11,"w":8,"h":9},"10":{"x":15,"y":1,"w":3,"h":2},"11":{"x":0,"y":0,"w":24,"h":1},"12":{"x":0,"y":3,"w":24,"h":1},"13":{"x":0,"y":1,"w":12,"h":2},"14":{"x":0,"y":38,"w":24,"h":1},"15":{"x":0,"y":10,"w":24,"h":1},"16":{"x":0,"y":6,"w":3,"h":2},"17":{"x":18,"y":1,"w":3,"h":2},"18":{"x":3,"y":6,"w":21,"h":2},"19":{"x":0,"y":8,"w":3,"h":2},"20":{"x":3,"y":8,"w":21,"h":2},"21":{"x":21,"y":1,"w":3,"h":2},"22":{"x":12,"y":1,"w":3,"h":2},"24":{"x":8,"y":11,"w":8,"h":9},"25":{"x":16,"y":11,"w":8,"h":9},"26":{"x":0,"y":26,"w":24,"h":6},"27":{"x":0,"y":32,"w":24,"h":6}}}