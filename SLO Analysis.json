{"version":13,"variables":[{"key":"AppName","type":"code","input":"import { rumUserSessionsClient } from \"@dynatrace-sdk/client-classic-environment-v1\";\nexport default async function () {\n const lastXDays = 1;\n const usqlQuery = 'SELECT DISTINCT application FROM useraction';\n const response = await rumUserSessionsClient.getUsqlResultAsTable({query: usqlQuery, startTimestamp: Date.now() - lastXDays * 24 * 60 * 60 * 1000});\n const sampleCount = response.values.length;\n function flatten(arr) {\n    var flat = [];\n    for (var i = 0; i < sampleCount; i++) {\n        flat = flat.concat(arr[i]);\n    }\n    return flat;\n}\n return( flatten(response.values))\n}","multiple":true},{"key":"SLO","type":"csv","input":"1,2,3,4,5,6,7,8,9,10,11,12","multiple":false},{"key":"ActionCategory","type":"csv","input":"All,Key,Entry,Exit","multiple":false},{"key":"KPI","type":"csv","input":"Duration,VisuallyCompleteTime,SpeedIndex,LoadEventEnd,FirstInputDelay,CumulativeLayoutShift,LargestContentfulPaint,CdnBusyTime,CdnResources,DocumentInteractiveTime,DomCompleteTime,DomContentLoadedTime,FirstPartyBusyTime,FirstPartyResources,FrontendTime,LoadEventStart,NavigationStart,NetworkTime,RequestStart,ResponseEnd,ResponseStart,ServerTime,ThirdPartyBusyTime,ThirdPartyResources","multiple":false},{"key":"ActionType","type":"csv","input":"Load, Xhr","multiple":true},{"key":"TimeShift","type":"csv","input":"1,7,14,21","multiple":false}],"tiles":{"5":{"type":"code","title":"Percent Traffic Increase for $KPI SLO Violation ","input":"import { rumUserSessionsClient } from \"@dynatrace-sdk/client-classic-environment-v1\";\nexport default async function () {\n  const metric = $KPI;\n  const metricAgg = \"avg\";\n  const last30Days = (Math.round(new Date().getTime() / 1000)- (720 * 3600))*1000;\n  var chartInterval = \"30m\"\n  var appsList = \"\\\"\"+$AppName[0]+\"\\\"\";\n  let i = 1;\n  // Build Apps List\n  while (i < 10) {\n    if ($AppName[i]==null) break;\n    appsList = appsList+\",\\\"\"+$AppName[i]+\"\\\"\";\n    i++;\n  }\n  var typeList = \"\\\"\"+$ActionType[0]+\"\\\"\";\n  let t = 1;\n  // Build Type List\n  while (t < 3) {\n    if ($ActionType[t]==null) break;\n    typeList = typeList+\",\\\"\"+$ActionType[t]+\"\\\"\";\n    t++;\n  }\n  var usqlQuery = 'SELECT DISTINCT DATETIME(endTime,  \"MM-dd HH:mm:ss\",\"'+chartInterval+'\") AS \"Date\", count(*) AS \"Count\", '+metricAgg+'('+metric+') AS \"Metric\" from useraction WHERE useraction.type in ('+typeList+') and useraction.application in ('+appsList+') limit 5000';\n  if ($ActionCategory==\"Key\") usqlQuery = 'SELECT DISTINCT DATETIME(endTime,  \"MM-dd HH:mm:ss\",\"'+chartInterval+'\") AS \"Date\", count(*) AS \"Count\", '+metricAgg+'('+metric+') AS \"Metric\" from useraction WHERE useraction.type in ('+typeList+') and useraction.application in ('+appsList+') and keyuseraction is true limit 5000';\n  if ($ActionCategory==\"Entry\") usqlQuery = 'SELECT DISTINCT DATETIME(endTime,  \"MM-dd HH:mm:ss\",\"'+chartInterval+'\") AS \"Date\", count(*) AS \"Count\", '+metricAgg+'('+metric+') AS \"Metric\" from useraction WHERE useraction.type in ('+typeList+') and useraction.application in ('+appsList+') and isentryaction is true  limit 5000';\n  if ($ActionCategory==\"Exit\") usqlQuery = 'SELECT DISTINCT DATETIME(endTime,  \"MM-dd HH:mm:ss\",\"'+chartInterval+'\") AS \"Date\", count(*) AS \"Count\", '+metricAgg+'('+metric+') AS \"Metric\" from useraction WHERE useraction.type in ('+typeList+') and useraction.application in ('+appsList+') and isexitaction is true limit 5000';\n  const response = await  rumUserSessionsClient.getUsqlResultAsTable({ query: usqlQuery,offsetUtc: -300,startTimestamp:last30Days });\n  if (response.values.length<6) return \"Try increasing the timeframe.\";\n  const sampleCount = response.values.length-6;\n  let ChangeMetric = 0;\n  let percentChangeTraffic = 0;\n  let trafficAVG = 0;\n  let metricAVG = 0;\n  let metricMIN = response.values[0][2];\n  let metricAAVG = 0;\n  let metricBAVG = 0;\n  let trafficAAVG = 0;\n  let trafficBAVG = 0;\n  let c = 0;\n  while (c < sampleCount) {\n    trafficAVG = trafficAVG + response.values[c][1];\n    metricAVG = metricAVG + response.values[c][2];\n    if (response.values[c][2]!==null)\n      {\n      if (response.values[c][2]<metricMIN) metricMIN=response.values[c][2];\n      }\n    c++;\n  }\n  let i2 = 0;\n  let i2A = 0;\n  let i2B = 0;\n    while (i2 < sampleCount) {\n          if (response.values[i2][1]>(trafficAVG/sampleCount))\n            {\n              if (response.values[i2][2]!=null)\n                {\n              metricAAVG=metricAAVG+response.values[i2][2];\n              trafficAAVG=trafficAAVG+response.values[i2][1];\n              i2A++;\n                  }\n            }\n          if (response.values[i2][1]<(trafficAVG/sampleCount)) \n            {\n              if (response.values[i2][2]!=null)\n                {\n              metricBAVG=metricBAVG+response.values[i2][2];\n              trafficBAVG=trafficBAVG+response.values[i2][1];\n              i2B++;\n                  }\n            }\n          i2++;\n        }\n  ChangeMetric = (Number(metricAAVG/i2A) - Number(metricBAVG/i2B));\n  percentChangeTraffic = (Number(trafficAAVG/i2A) - Number(trafficBAVG/i2B))/Number(trafficBAVG/i2B)*100;\n  console.log(\"Traffic Below:\",trafficBAVG/i2B)\n  console.log(\"Traffic Average:\",trafficAVG/sampleCount)\n  console.log(\"Traffic Above:\",trafficAAVG/i2A)\n  console.log(\"Traffic Change Percent:\",percentChangeTraffic)\n  console.log(\"Metric Min:\",metricMIN)\n  console.log(\"Metric Below:\",metricBAVG/i2B)\n  console.log(\"Metric Average:\",metricAVG/sampleCount)\n  console.log(\"Metric Above:\",metricAAVG/i2A)\n  console.log(\"Metric Change:\",ChangeMetric)\n  if ((($SLO*1000)-(metricAVG/sampleCount))*(percentChangeTraffic/ChangeMetric)<=0) return \"N/A\";\n  if ($SLO*1000<=(metricAVG/sampleCount)) return \"N/A\";\n  return (($SLO*1000)-(metricAVG/sampleCount))*(percentChangeTraffic/ChangeMetric);\n}","visualization":"singleValue","visualizationSettings":{"thresholds":[{"id":1,"field":"element","title":"","isEnabled":true,"rules":[{"id":2,"color":"#F8312F","comparator":">","label":"","value":0}]}],"chartSettings":{"gapPolicy":"connect","circleChartSettings":{"groupingThresholdType":"relative","groupingThresholdValue":0,"valueType":"relative"},"categoryOverrides":{},"categoricalBarChartSettings":{}},"singleValue":{"showLabel":false,"label":"","prefixIcon":"","autoscale":true,"alignment":"center","trend":{"isVisible":false},"sparklineSettings":{"isVisible":false},"colorThresholdTarget":"value","recordField":"element"},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"lineWrapIds":[],"columnWidths":{}},"unitsOverrides":[{"identifier":"element","unitCategory":"percentage","baseUnit":"percent","displayUnit":null,"decimals":2,"suffix":"","delimiter":false,"added":1701281148734}]}},"11":{"type":"markdown","title":"","content":"![](data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAABy8AAAAMCAYAAADbJPG3AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAAEnQAABJ0Ad5mH3gAAACdSURBVHhe7dtBFcAgDETBUBtFA6KrDhf0gofsYeay8fBfRn37FAAAAAAAAECz5y4AAAAAAABAK/ESAAAAAAAAiCBeAgAAAAAAABHESwAAAAAAACCCeAkAAAAAAABEEC8BAAAAAACACOIlAAAAAAAAEGG8c517AwAAAAAAALTxeQkAAAAAAABEEC8BAAAAAACACOIlAAAAAAAAEKDqB2IIBAQ2TEouAAAAAElFTkSuQmCC)"},"12":{"type":"markdown","title":"","content":"![](data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAABy8AAAAMCAYAAADbJPG3AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAAEnQAABJ0Ad5mH3gAAACdSURBVHhe7dtBFcAgDETBUBtFA6KrDhf0gofsYeay8fBfRn37FAAAAAAAAECz5y4AAAAAAABAK/ESAAAAAAAAiCBeAgAAAAAAABHESwAAAAAAACCCeAkAAAAAAABEEC8BAAAAAACACOIlAAAAAAAAEGG8c517AwAAAAAAALTxeQkAAAAAAABEEC8BAAAAAACACOIlAAAAAAAAEKDqB2IIBAQ2TEouAAAAAElFTkSuQmCC)"},"13":{"type":"markdown","title":"","content":"![](data:image/webp;base64,UklGRnAZAABXRUJQVlA4WAoAAAAgAAAAtAIAdgAASUNDUMgBAAAAAAHIAAAAAAQwAABtbnRyUkdCIFhZWiAH4AABAAEAAAAAAABhY3NwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAA9tYAAQAAAADTLQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAlkZXNjAAAA8AAAACRyWFlaAAABFAAAABRnWFlaAAABKAAAABRiWFlaAAABPAAAABR3dHB0AAABUAAAABRyVFJDAAABZAAAAChnVFJDAAABZAAAAChiVFJDAAABZAAAAChjcHJ0AAABjAAAADxtbHVjAAAAAAAAAAEAAAAMZW5VUwAAAAgAAAAcAHMAUgBHAEJYWVogAAAAAAAAb6IAADj1AAADkFhZWiAAAAAAAABimQAAt4UAABjaWFlaIAAAAAAAACSgAAAPhAAAts9YWVogAAAAAAAA9tYAAQAAAADTLXBhcmEAAAAAAAQAAAACZmYAAPKnAAANWQAAE9AAAApbAAAAAAAAAABtbHVjAAAAAAAAAAEAAAAMZW5VUwAAACAAAAAcAEcAbwBvAGcAbABlACAASQBuAGMALgAgADIAMAAxADZWUDggghcAALB1AJ0BKrUCdwA+bTKWR6QjIqElcRt4gA2JZG7hbRCa2t/cv6l+43iZcc7x/bP2e/qf7q/N7Wf6V+A/7N+3Hy577uw/9N9t3wa+T/sX/L/u39//cj59/3f/T+xb88/8T3Af1L/5n9g/y3tXeofzA/1D/Kfud7un+e/a33R/4T/S/s58AX9m/23WbfvJ7Dn83/4H//9d/95fho/rX/U/b72n//rrD/n//fdx3krYZ+bc8faPsG75AM1lQ/YjI3w0omfYH+03sZ/tUX4YCARBG/8LxiPe4YlCU1TeDTg0dhNgaKyHnxzxlmHm1oNBoNBoNBoNBoNBoKSkVt0ppaSnFAz41aEw/OldVUv/L9oH0ba+Qz6Xfugx7sqUq4F+hk0Xo1ir8F1exVJFZX4xmg0Ez1WfH4NWB+cTicTiblbEJEBpnM6D/+F4ZikMDVQOn36W6e51PINur+xoghTm++jKKBZeb2yw54CrQ65OfLTzYGGn8ulUzXB7rtsMWTHtkEVJ7dgO9BPu5o1I7eA0rZgITnL5K+QHVWW9YacBcOBLvDRBdCTbpvyf3uOGrYfgrrRLS8+okTbCuy700VmB1nwPOEbViQUeoe81y7kAqgUHunqRuywTxl5LjtDY1awgQFBUHBdeB8tGcnqAc0gcgaWCEGDk68yAh/Afw33y1H1QpdxeMy3tLdPsSUJAnvUkv4Db3Gz/cUzdkz2uyEU/kOOj2e1p/+1qAgyjDcp6xihJ2ZqqXy9V7wcQljdjxJnd2EPGTqHP41l86QF3Ldd0UEPEkvK1pRXQFfOIz7hQO4WYBOTSmiOufv+7vBAsATsvUkIZlbTAfGqCwDIt6jy/1S9XKibHyJRxM4NtWjF6/MYUth6olOW3m+F/OIYpawq5jT+XEicAfkcYvOUBhtd/8ynyRw+li0lqToLJUqv8Vyh415scdVBxVBewIYxqJXxltODeAffV+HNEO5uqyjnGhv6I7BxwihauTPfQUNeiz4diYkRd1Q8MngEWqAoTDVocU9qeHOXglXp19yO/oYEP4Nqxb0YYu+lDvAGNhtVn/LpSzYNIoP28IUtNSxpGx+i/277SRZH5kezFGEXJFjZZWNKOBiFRYFxAffOvtFMcGNvR6S17slqgW6B1c6ECGU1Ame8PqzgiFPcEgKWLJBFFRhRagnqHXEvM3UH+nsv53cAM+PoJyyMfTol9r2TCkIK6EGDVJGA+ba7fnXK6wAT455rCV8w82tBoNBoNBoNBoNBoNBoNBoNBoIQAAP7+TXxpKAH3SVIWK2Zy3cPf4QUVhEqburssEE8AgHLL8q73aVqeOSvFApaIux96jLWnfq3dcjVvXOU9iExz/Qv1i6JY1R12mqeOl9MSvq9Ieu4gMHH3z9tWma9Mh1Myj+45Mr5Qj/2ZNCf/ettsbkRDpW2OfdbTkONoH6Z4q0fzwdCThEpVIp9v2pP1LcL1upypTXY+RFtpRmaIquMl7OKF5+vdedECwO/dKo7PrBpC/9PpXz5McLAXWr54pjuaQyJrUhtcyoVFOQjDXH/whdVXIrDBx9QHP0rWGUSjcS0cPOt1QNHFG43EtHDzrdUDRxRuNxLRw863VA0cUbjcS0cPOt1QNHFG43EtHDzrdUDRxNxALTxg+fDGzJfiPYtRfzKzx9HmyWAn4eY1SUGno41R1/We6cv08uwkC4qloOodOnbGC3Vj3MfbX3niX6gy4DdtOffFTYnQopi10m4vS1qu80vxAUxqEWGZfy5eWEibrSKfCcWVkrVNM3typ35rnYU1/Jm32ecKuAhQVm4lg35i4C+IMxYLYzRAB93gDXhNeQGJwBuJEO5oZwAjta/yRwroH4tWHJGvry/NuBJ9kKXyY7X3b58Jx/KF55r6/46UAXLMXoHZCBwZF0CWsuLO2dqN8UirkyQPKQU0by6/S8lde9DTno9MUq8uARC4JIIgNbllIZye8z4p44frgY1sMaLW3W2T/GfOtL0PwV1oGT2Pt17CkSbFCadIpnXTKGUPh6jRQdyHrqwWwvGvX2oaML7aZYkGZRO7NlydqP6Pmk6/izw8s4jjT9Menqc7FZptP6K2hLcnETI9Tj2advPhnledKbVgkCHyBoQ4qcflNh1dTMsnBXy4EFvNbdQ42OpadFB0ySbA9DxdGlSA9hXyknTXQNzHaCCfuM8x6QlqrFzX09WfvRvkCTn7BsByp6zTnJyGVmfzzLVo9OK0cBwGxNACD26O1RUCdC+iivOu8XasBhabsUYGRIDDI2LIRLT9w+GAAAzutR2RtBo7aXcazxFDIHoxxD0eyE295JUc6JjwwpZ9cydBfDAAAAWir+9JxMIzMyZMBaG955nzlfZreuyLFRLW2vHmxUlJDRn/Ga7O677wOPDG/6WKxomF+p2uGzqhLm/GMD0L+mTSbmzCblGbE/QpXog+xk2my0Bk9l9PYp0hKfqd15ZkhUX/W5mWEXyrpnrEsxjViuaIjsiPgkkf39AgL1ip8ivn5c+XPsVPv8Yf3DDKqM6GmlN/j4ZOVImyakFHjwEyWeAdgCYS3Og2uvvY7m06dL/5ppbxaxk1JjRRRH6guIdsNmtddIyzNjkJhwM3bSf1gs+S37yW7Tk7tM12phI4t30Rngv9rc+GUloWeMz45ywdn/FGp32bBcBmQw8rtRDMubZAsmWOXfRUkTgzMuVDjvzo7Z57foSFExuMnI4k1JT8hrl90fUp28vPNVLqinFOLOtz2RWESKhVz+Nv0T03NOwDD05vMDVgkjXi949D4kVkvFzt0dynvUXF99RaZWXoKATu1Gzx2RmKBfWtRiwyBCLPzFnY+C7Le0mU9Wl5qtueH0+cmmJumWd00dfUQvpwk0KzRlJVu4SMZNBKiUaW1IeMBVvQvD9Mn61v89EzMmeTqVXdybecc5KAtH96T/nBkvN/bZw16hktyNJyb0pH/9yMNizLv2tzvA7FdBoiyn5avuEgc6rrRMKkD6NxAIV4jBowTcTpiySQqLh2OVKskbU4CLupScE2kZuDEMNfKd55Mcy5KLSec1f99VCRI0RA4pvpu4cBXkGGvDOHTBKyHFdJivj1ypkVAJa2Ue7i6wApUBnqGwt60pQ8gHtIhw7Ut8NFLfy4/GKRYTDoMWXHIWjsu80ri/oNwpka51db4t7H25t3Zinaoj+yth+6YQ7Y/YTuZw6RhW2Z9qbSKj023vLXTAnH+wx34EGvvcxsM8BFPk/Y5oqVmzJxzkQlTuFo+D93U5rGtWmiHrNsuY/1JXfun9VgM2/0HeBRWCY56zOa5U1FEtdJtGMTS+I5iBEyxySwBJoeW9xm86YxB+VKQB0+4ERs9h7CGr4ofO2gJptZ9CkkqftOQYcVxjJW/jwshJD835bu4O/c2RK0fBfRKQkdTJ9K5I6b4Q7AXyqUqyHGwgaDp4Nf03ItdNHHAawihSCz5MEfRbCSTDOidC+zV6X/4hCkU4lfUSfiZbITyi6AozXBPHTKc8FwEBd7LeKCNOIk5P+qa8bVUIblZyo7r0PPxfhjJYepsxMWJHIPOqasoFecXgKh3lTDYQqcJS0LMIaQr/cTysGuQB3AUUn8JEHRdx2XBEDAU/Rrk5i5vQsK5NLPm9W71kqa6Bx0mAmbSYos/Pz6cLxqgjkhRKp595HZxk7xNEYNSA71GayDYdoGz3h7QRMALmHQm7SUnNqXnDFzJg3HlVgC3tAY9/PUcMV9myP1l3/qSdngUeAI8z1WFebizYdHZJ/P2+TQa3qAp+Oav0dETNvFaj2tpwKurmY6fsubRnXOYb/S9y79TwTtJoU5/VRzzeehtTssV2VZwyS4eqAzMemi+wJ3cFgDee0mkbcwBib3Vl5wPPIilEYk2Cc69VTYAfOHGsVWodC10pqzS0UpkkLXUgIuTDxE1fod9+L1G+K8Z7PJEI5Ifz/jCH3j0p6ktWHwBu8oBgrqARhRi4JxkvChaFv2XFeE9jnDFJIAEJUgrR0k2j0p0NuHNRrSFHEt7rG7MP9RQTADZCB9PlpNUlytgQqYY98wIlmz4chBlmzyNf5ClafA0onXb8TYezjjFjiD02vvrJ/VwgepTB3uA43wfXaTT8ewOlMZx40NgkmB7Gl0T8alEs26ywbeo+3LLC/9RAyVlzhCcmiBQfSj/jeBhR+mTAVO4DX1t0Pq9rrSsU1Zev5vWhjzzCyqdhRsuY3rQJONLEZyWvlHHguH2PDn18WtC8Q7SPcZRbKLDvAREO7HMZ8vUJWevJNbjpfhyzyZC0GLMtRPicgWz1AT6mKsNj2IiiQRDUwakrO13AT408G1hLYv26eIS/XPf4zPKgxoDq63b7i/YxErvfTVgnh7Zflk6Hv+IIrrVvBP1dg4HqrNqCB3uNUTnMpxK9QY5ABhwnNzSzZ2DbqKcngynYCXrDR7AS0TwsSlMVnnvN7+V6FwuJa4pqcA5G3oCN4rN1cQhqus9g/UMU0T8OjNFjI9fwtR2Zgv+t0/mxmj8VrDrFWew6gNylmK3RHFQ34To5Qx7ZFlShFEVRgJ3lbRsLFsOJQ5gpX0qJhgicOCVxr0abdp6idpgIOp+wwl5XY0rAys25lBeC2ZWDQKg4gLH3r5RBgeBHkriny3sRR+8RNfaUaQQUqnph7f1pynXDqrwdIoBc5HppWC69txgxE9ggHBIp+GyqAMh+gvAE94tvbOYMqLiIJByx9U0uKSR9mx7zC3jUlExXK4dBlOxSFRNuecvyviHcI/7beuE+k9l4j7KbjIPeDdRMuU+aRrBQWbLn60eIF6q7x8LZmKlS2HbKziAvOQjo3t3DYiN2Ua89IyvkHwJcDWzqV1ipXEC9+GFWcQk/EI9AGY7Xv4ehaOJjwtgpHsocO8o13YhGlUpJDaR2qR1fZGG8S2NwrordHkHH+l4gnRtFznCE6hYIiDlcnSdclPvwiKxOrVYycqVwwIiLxHQvlju55xUi1WQUJ8tNojeknR+eA4E4nhphWzvgXxuPsidwASQjWg7fX+g+lVoX9Jk27rI9GlrGJHOCZcz0bnOQF5IhWEk5985kqIc8Gzlgzs7ymOS2efdA+QbCRe6iwh+2dDrLzo2ueqzDm62HUkHc3cxOSkE+8yRkYIxt4X2Ssamhr9CwqOOgeqoCoT23yYDQo0RYFCaXAjWSPX+gJc3iQlx9VJy3dvjlhQN9v0MFDx5ZnU4rnOfhFefriPDLusn/vp2mWlihGuKExOKVgI4uQdsTW4gQRkgFKVQcf2nB3/a2GgmhNPflYZaFe1iXl9zP7vG09NzUxnIkF5tYCXQPvt86tylxJhoBOyN+RsOiiPKqFvA9crm9q/tzmh7AYiTZc7buGgTVZc0ysSfzWJBU4O+IMT/o91BXKrLsRIAY8dsTx3LE/bAn5/Kder5icb8U7fWoONlom2Bv/My40CCGdinJdDw1AyPvXp6nPliYjA8j7Pn2URLJAbKWZZu64GI1HMBZ2/e8j0+laIAh9bywF37fvVbrNKNnDNANX1WP/VMhTc/o/133l1ItZhjkHvwDl4SeOTUaQUr90lvpVswlntG08ginDVzOkb06ANC4yQQFJMG3YYCbVN4XvyG/ig/4wjTxyzBVONxrtV96qxPIbI/Y+YFcOyJqvRDhT4kgPacrVfPSf69h/4mP0L0W30mL39TcDGqLqtqt3x1wKvIoXeBhIck+yKVL0VpCH4SwP8I+qGJeOp4PkhTM0hNNJH0ZcmSVpRSH29N+yZ2DdFnYCYij9y3XXojoDReuhJPHDbuyej+aku5WMszWpwLW9TP8kkeotyvExCA8xAXjAxfhJHUlpEk1zTy5G5Bdh9phHO1ZGlW30aiabFQPmromGZB2V+Pv9YvidqbNyzOzQseGTifcwXMYwTnyY8oIffEB5QmKkvmiSZuRl+bt9iePDoGWafuadoQeAqAaV+3HrpGjrXq8IJ23GIqnQBEgPAXqYBtpU+LtfN76c45iZCov+HLyyXh0kfX0mNUe5WjzzCT7lgKFXy7L3qziY8PSuAw+3xElmdRws3qxstVMjaZBjblc4uNv3i3+oph/+8fRht7h7Py2uoWM9SCnDCp1uoI3QKue13Ia9U+H/WleimXPJ/eaov+MT46WiFRkhwIR+hDBBiZgcLVwmyeyYnkEF38G+wJBVvb274NWpesBJQ2JJoLNO+anvHMN8jjHwIqZA82DU3LRHhGHY4KlUTB23b+30SDCNgPmD1Johrwz18qz5bInEEGwv01yIaStlBMWKJSZEy6pqNMJK0UYTSuHPcSw1FtFfqbnHBcX6SHxIwELqVtjeH4GW0BAJ1qxv9/6rdCOf7ZFBWkWxbtqi9qvwdZup+z/JZBWaSDhO43gWiJzTAdTbNgdDWrnSKyE0FhzE+woTsZEMXXqEsQd2WL4ousEAQ+hPQgp84yRBX/jP4lfDItUJo0CyZrgwDqXGwW4HTbIkCvKNu6vaV8lbd8i0zY0vHp+EQaadzWLiBetM/on/gQx0Eqjf67P8MCgWNrALU8HK7YoAcc4UsvmMVbJBN12xwwHXF9elhbRHyMrPmrDiyIu4He/hZ06g2fHZ70g4RbvSKvuSk8uC4S39Zw7LxB71BC1duHPM9qgercGBQ5mItjJn0r7boxFnNnALDWCnJDRMskVnSNFjCga/MBVyl9hSIREcrmz9YxwSrFSAJ+LaPNyr9C2xgu7QBO701lQAa08lL0NZhpu7h/FQIO8bNypNf7Uop09HXEVzIsClDi+Z5ZdPyL3sxU11BNMOiYbwTEENB724TzxuHzcmONyLhDFXzaARI0vhn06D6b0zRN4KF6vYN0J5XO9BjDVQWOY/BqylyAaRmgdfwFKI+5isFD5np1THRa0RTN4Q2QURgUPIBwyE19CFn/onXzyOqbaXUorSo+QUR3gjWOKK84hb8WA4x+IPYLEdS1IfimXtfIi8nApulgAMkS9UIwO4KI/Q6kT33kedo1tf047xJCngoooRX818bIITMEEN494ESUTtPqruttY+CF101q58r3/q+DeXJ2ndXM5fe75ENtodTe50EFTsX2y3FzeZ2APgajrhPRUom3X3Ru7NcJ1kPnToW0kOQJyu31gi+dlp8sPwrlXmVYh4GezRrSdR33ADCR/PoSGeKXqF8CXCnACsiHSUDy0X89YNNktKoGlS+sFyE/zntE7938uR0xGxYLLRW5WArq2mvyoiwKD5Mvi9h8Qpp32W90BWD5GIgT9odt0FBzZj6Y1svZ616o81Nhr9dtBGtH4a9CUxRYcSiPhamLInmk/gbG6cZAvGubbX+TJq4nxD7tE/ypjVlWCV+mrI9UinDwhBxAZG0NXJq8pXfjlR2GHNpJan9jXZ3xeHG9qxo1WNcR8EwggWDgTLV8F8ahlvA3T3vsqTxKaqWVoKycT51fwlfIp5T8etIhwN+GohOdMz9KADmvjOST85HQRwUSBOpZqsW8XyFVjiZklU/COMhXuP/9kgPKW2GA4oXsmwo0oewaUPXAKdIFkqnd96mpMziGbAz8hVE1FmMBoMVOG4zJOleijApcZbJudC+w0bzb9hcjJlrhzxsVs973h72rVoj2CvyO19gTg78cZqsq2HtHZ6HzVCgBoDN5o93lUYncyJmUV1hjTMdsk7xNfiPmkfDRXJ6RGiASZPQyTsvSYKgb858aC8VkaV/TZ7RmjJdNixGr4RnW1MA8b87cLUi2vX5xdsAw01f+BCBjfiICac+3K6bJL7RusyTdwsqJMjCmXKMkFL2Aqst29n6Ec58x9Us0ZGgNnZB1u+R/QjFONxdqPZm7MqdZ20dtnB7D4VJ7NE5KzK/xnUODAiGVEm19KVKAI/J78XWE6EHClwtCkSypiYXNbO40SEpYixm+U1dq6lGaKwOZ8fkGhdV9WlzK2SXzfFtgAqD6VAytDTC8m1MXFG+/y20zLAh6JjN/G0x70p91LDgfkVn4rDuXNdP7tJS983GPJaG50bvwHdLyD48rODmtjegAAAAAAAAAAAAAAAAAAAAAAAAXmJgAAAAAAAAAAAAAAAAAA==)"},"23":{"type":"code","title":"Average $KPI","input":"import { rumUserSessionsClient } from \"@dynatrace-sdk/client-classic-environment-v1\";\nexport default async function () {\n  const metric = $KPI;\n  const metricAgg = \"avg\";\n  const last30Days = (Math.round(new Date().getTime() / 1000)- (720 * 3600))*1000;\n  var chartInterval = \"30m\"\n  var appsList = \"\\\"\"+$AppName[0]+\"\\\"\";\n  let i = 1;\n  // Build Apps List\n  while (i < 10) {\n    if ($AppName[i]==null) break;\n    appsList = appsList+\",\\\"\"+$AppName[i]+\"\\\"\";\n    i++;\n  }\n  var typeList = \"\\\"\"+$ActionType[0]+\"\\\"\";\n  let t = 1;\n  // Build Type List\n  while (t < 3) {\n    if ($ActionType[t]==null) break;\n    typeList = typeList+\",\\\"\"+$ActionType[t]+\"\\\"\";\n    t++;\n  }\n  var usqlQuery = 'SELECT DISTINCT DATETIME(endTime,  \"MM-dd HH:mm:ss\",\"'+chartInterval+'\") AS \"Date\", count(*) AS \"Count\", '+metricAgg+'('+metric+') AS \"Metric\" from useraction WHERE useraction.type in ('+typeList+') and useraction.application in ('+appsList+') limit 5000';\n  if ($ActionCategory==\"Key\") usqlQuery = 'SELECT DISTINCT DATETIME(endTime,  \"MM-dd HH:mm:ss\",\"'+chartInterval+'\") AS \"Date\", count(*) AS \"Count\", '+metricAgg+'('+metric+') AS \"Metric\" from useraction WHERE useraction.type in ('+typeList+') and useraction.application in ('+appsList+') and keyuseraction is true limit 5000';\n  if ($ActionCategory==\"Entry\") usqlQuery = 'SELECT DISTINCT DATETIME(endTime,  \"MM-dd HH:mm:ss\",\"'+chartInterval+'\") AS \"Date\", count(*) AS \"Count\", '+metricAgg+'('+metric+') AS \"Metric\" from useraction WHERE useraction.type in ('+typeList+') and useraction.application in ('+appsList+') and isentryaction is true  limit 5000';\n  if ($ActionCategory==\"Exit\") usqlQuery = 'SELECT DISTINCT DATETIME(endTime,  \"MM-dd HH:mm:ss\",\"'+chartInterval+'\") AS \"Date\", count(*) AS \"Count\", '+metricAgg+'('+metric+') AS \"Metric\" from useraction WHERE useraction.type in ('+typeList+') and useraction.application in ('+appsList+') and isexitaction is true limit 5000';\n  const response = await  rumUserSessionsClient.getUsqlResultAsTable({ query: usqlQuery,offsetUtc: -300,startTimestamp:last30Days });\n  if (response.values.length<6) return \"Try increasing the timeframe.\";\n  const sampleCount = response.values.length-6;\n  let ChangeMetric = 0;\n  let percentChangeTraffic = 0;\n  let trafficAVG = 0;\n  let metricAVG = 0;\n  let metricMIN = response.values[0][2];\n  let metricAAVG = 0;\n  let metricBAVG = 0;\n  let trafficAAVG = 0;\n  let trafficBAVG = 0;\n  let c = 0;\n  while (c < sampleCount) {\n    trafficAVG = trafficAVG + response.values[c][1];\n    metricAVG = metricAVG + response.values[c][2];\n    if (response.values[c][2]!==null)\n      {\n      if (response.values[c][2]<metricMIN) metricMIN=response.values[c][2];\n      }\n    c++;\n  }\n  let i2 = 0;\n  let i2A = 0;\n  let i2B = 0;\n    while (i2 < sampleCount) {\n          if (response.values[i2][1]>(trafficAVG/sampleCount))\n            {\n              if (response.values[i2][2]!=null)\n                {\n              metricAAVG=metricAAVG+response.values[i2][2];\n              trafficAAVG=trafficAAVG+response.values[i2][1];\n              i2A++;\n                  }\n            }\n          if (response.values[i2][1]<(trafficAVG/sampleCount)) \n            {\n              if (response.values[i2][2]!=null)\n                {\n              metricBAVG=metricBAVG+response.values[i2][2];\n              trafficBAVG=trafficBAVG+response.values[i2][1];\n              i2B++;\n                  }\n            }\n          i2++;\n        }\n  console.log(\"Traffic Below:\",trafficBAVG/i2B)\n  console.log(\"Traffic Average:\",trafficAVG/sampleCount)\n  console.log(\"Traffic Above:\",trafficAAVG/i2A)\n  console.log(\"Traffic Change:\",percentChangeTraffic)\n  console.log(\"Metric Min:\",metricMIN)\n  console.log(\"Metric Below:\",metricBAVG/i2B)\n  console.log(\"Metric Average:\",metricAVG/sampleCount)\n  console.log(\"Metric Above:\",metricAAVG/i2A)\n  console.log(\"Metric Change:\",ChangeMetric)\n  return metricAVG/sampleCount;\n}","visualization":"singleValue","visualizationSettings":{"thresholds":[{"id":1,"field":"element","title":"","isEnabled":true,"rules":[{"id":0,"color":"#00D26A","comparator":"≥","label":"","value":0},{"id":1,"color":"#FCD53F","comparator":"≥","label":"","value":3000},{"id":2,"color":"#F8312F","comparator":"≥","label":"","value":12000}]}],"chartSettings":{"gapPolicy":"connect","circleChartSettings":{"groupingThresholdType":"relative","groupingThresholdValue":0,"valueType":"relative"},"categoryOverrides":{},"categoricalBarChartSettings":{}},"singleValue":{"showLabel":false,"label":"","prefixIcon":"","autoscale":true,"alignment":"center","trend":{"isVisible":false},"sparklineSettings":{"isVisible":false},"colorThresholdTarget":"value","recordField":"element"},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"lineWrapIds":[],"columnWidths":{}},"unitsOverrides":[{"identifier":"element","unitCategory":"time","baseUnit":"millisecond","displayUnit":null,"decimals":2,"suffix":"","delimiter":false,"added":1701281148734}]}},"24":{"type":"code","title":"Percent Traffic Increase for $KPI SLO Warning","input":"import { rumUserSessionsClient } from \"@dynatrace-sdk/client-classic-environment-v1\";\nexport default async function () {\n  const metric = $KPI;\n  const metricAgg = \"avg\";\n  const last30Days = (Math.round(new Date().getTime() / 1000)- (720 * 3600))*1000;\n  var chartInterval = \"30m\"\n  var appsList = \"\\\"\"+$AppName[0]+\"\\\"\";\n  let i = 1;\n  // Build Apps List\n  while (i < 10) {\n    if ($AppName[i]==null) break;\n    appsList = appsList+\",\\\"\"+$AppName[i]+\"\\\"\";\n    i++;\n  }\n  var typeList = \"\\\"\"+$ActionType[0]+\"\\\"\";\n  let t = 1;\n  // Build Type List\n  while (t < 3) {\n    if ($ActionType[t]==null) break;\n    typeList = typeList+\",\\\"\"+$ActionType[t]+\"\\\"\";\n    t++;\n  }\n  var usqlQuery = 'SELECT DISTINCT DATETIME(endTime,  \"MM-dd HH:mm:ss\",\"'+chartInterval+'\") AS \"Date\", count(*) AS \"Count\", '+metricAgg+'('+metric+') AS \"Metric\" from useraction WHERE useraction.type in ('+typeList+') and useraction.application in ('+appsList+') limit 5000';\n  if ($ActionCategory==\"Key\") usqlQuery = 'SELECT DISTINCT DATETIME(endTime,  \"MM-dd HH:mm:ss\",\"'+chartInterval+'\") AS \"Date\", count(*) AS \"Count\", '+metricAgg+'('+metric+') AS \"Metric\" from useraction WHERE useraction.type in ('+typeList+') and useraction.application in ('+appsList+') and keyuseraction is true limit 5000';\n  if ($ActionCategory==\"Entry\") usqlQuery = 'SELECT DISTINCT DATETIME(endTime,  \"MM-dd HH:mm:ss\",\"'+chartInterval+'\") AS \"Date\", count(*) AS \"Count\", '+metricAgg+'('+metric+') AS \"Metric\" from useraction WHERE useraction.type in ('+typeList+') and useraction.application in ('+appsList+') and isentryaction is true  limit 5000';\n  if ($ActionCategory==\"Exit\") usqlQuery = 'SELECT DISTINCT DATETIME(endTime,  \"MM-dd HH:mm:ss\",\"'+chartInterval+'\") AS \"Date\", count(*) AS \"Count\", '+metricAgg+'('+metric+') AS \"Metric\" from useraction WHERE useraction.type in ('+typeList+') and useraction.application in ('+appsList+') and isexitaction is true limit 5000';\n  const response = await  rumUserSessionsClient.getUsqlResultAsTable({ query: usqlQuery,offsetUtc: -300,startTimestamp:last30Days });\n  if (response.values.length<6) return \"Try increasing the timeframe.\";\n  const sampleCount = response.values.length-6;\n  let ChangeMetric = 0;\n  let percentChangeTraffic = 0;\n  let trafficAVG = 0;\n  let metricAVG = 0;\n  let metricMIN = response.values[0][2];\n  let metricAAVG = 0;\n  let metricBAVG = 0;\n  let trafficAAVG = 0;\n  let trafficBAVG = 0;\n  let c = 0;\n  while (c < sampleCount) {\n    trafficAVG = trafficAVG + response.values[c][1];\n    metricAVG = metricAVG + response.values[c][2];\n    if (response.values[c][2]!==null)\n      {\n      if (response.values[c][2]<metricMIN) metricMIN=response.values[c][2];\n      }\n    c++;\n  }\n  let i2 = 0;\n  let i2A = 0;\n  let i2B = 0;\n    while (i2 < sampleCount) {\n          if (response.values[i2][1]>(trafficAVG/sampleCount))\n            {\n              if (response.values[i2][2]!=null)\n                {\n              metricAAVG=metricAAVG+response.values[i2][2];\n              trafficAAVG=trafficAAVG+response.values[i2][1];\n              i2A++;\n                  }\n            }\n          if (response.values[i2][1]<(trafficAVG/sampleCount)) \n            {\n              if (response.values[i2][2]!=null)\n                {\n              metricBAVG=metricBAVG+response.values[i2][2];\n              trafficBAVG=trafficBAVG+response.values[i2][1];\n              i2B++;\n                  }\n            }\n          i2++;\n        }\n  ChangeMetric = (Number(metricAAVG/i2A) - Number(metricBAVG/i2B));\n  percentChangeTraffic = (Number(trafficAAVG/i2A) - Number(trafficBAVG/i2B))/Number(trafficBAVG/i2B)*100;\n  console.log(\"Traffic Below:\",trafficBAVG/i2B)\n  console.log(\"Traffic Average:\",trafficAVG/sampleCount)\n  console.log(\"Traffic Above:\",trafficAAVG/i2A)\n  console.log(\"Traffic Change Percent:\",percentChangeTraffic)\n  console.log(\"Metric Min:\",metricMIN)\n  console.log(\"Metric Below:\",metricBAVG/i2B)\n  console.log(\"Metric Average:\",metricAVG/sampleCount)\n  console.log(\"Metric Above:\",metricAAVG/i2A)\n  console.log(\"Metric Change:\",ChangeMetric)\n  if ((($SLO*1000)-(metricAVG/sampleCount))*(percentChangeTraffic/ChangeMetric)<=0) return \"N/A\";\n  if ($SLO*1000<=(metricAVG/sampleCount)) return \"N/A\";\n  return (($SLO*1000)-(metricAVG/sampleCount))*(percentChangeTraffic/ChangeMetric)*.9;\n}","visualization":"singleValue","visualizationSettings":{"thresholds":[{"id":1,"field":"element","title":"","isEnabled":true,"rules":[{"id":1,"color":"#FCD53F","comparator":">","label":"","value":0}]}],"chartSettings":{"gapPolicy":"connect","circleChartSettings":{"groupingThresholdType":"relative","groupingThresholdValue":0,"valueType":"relative"},"categoryOverrides":{},"categoricalBarChartSettings":{}},"singleValue":{"showLabel":false,"label":"","prefixIcon":"","autoscale":true,"alignment":"center","trend":{"isVisible":false},"sparklineSettings":{"isVisible":false},"colorThresholdTarget":"value","recordField":"element"},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"lineWrapIds":[],"columnWidths":{}},"unitsOverrides":[{"identifier":"element","unitCategory":"percentage","baseUnit":"percent","displayUnit":null,"decimals":2,"suffix":"","delimiter":false,"added":1701281148734}]}},"25":{"type":"code","title":"Apdex Trend","input":"import { rumUserSessionsClient } from '@dynatrace-sdk/client-classic-environment-v1';\n  const startTime = Date.parse($dt_timeframe_from).toString();  // Get Dashboard Start Time\n  const endTime = Date.parse($dt_timeframe_to).toString();      // Get Dashboard End Time\n  const startShiftTime = startTime-(86400000*$TimeShift);       // Get TimeShift variable, convert to days and create startShift\n  const endShiftTime = endTime-(86400000*$TimeShift);           // Get TimeShift variable, convert to days and create endShift\n  var appsList = \"\\\"\"+$AppName[0]+\"\\\"\";\n  let i = 1;\n  // Build Apps List\n  while (i < 10) {\n    if ($AppName[i]==null) break;\n    appsList = appsList+\",\\\"\"+$AppName[i]+\"\\\"\";\n    i++;\n  }\n  var typeList = \"\\\"\"+$ActionType[0]+\"\\\"\";\n  let t = 1;\n  // Build Type List\n  while (t < 3) {\n    if ($ActionType[t]==null) break;\n    typeList = typeList+\",\\\"\"+$ActionType[t]+\"\\\"\";\n    t++;\n  }\n  const query = 'SELECT CONDITION (count(*),WHERE apdexcategory=\"SATISFIED\" and starttime>='+startTime+' and endtime<='+endTime+') as \"CSatisfied\", CONDITION (count(*),WHERE apdexcategory=\"TOLERATING\" and starttime>='+startTime+' and endtime<='+endTime+') as \"CTolerated\", CONDITION (count(*),WHERE apdexcategory=\"FRUSTRATED\" and starttime>='+startTime+' and endtime<='+endTime+') as \"CFrustrated\", CONDITION (count(*),WHERE apdexcategory=\"SATISFIED\" and starttime>='+startShiftTime+' and endtime<='+endShiftTime+') as \"PSatisfied\", CONDITION (count(*),WHERE apdexcategory=\"TOLERATING\" and starttime>='+startShiftTime+' and endtime<='+endShiftTime+') as \"PTolerated\", CONDITION (count(*),WHERE apdexcategory=\"FRUSTRATED\" and starttime>='+startShiftTime+' and endtime<='+endShiftTime+') as \"PFrustrated\" FROM useraction WHERE useraction.type in ('+typeList+') and useraction.application in ('+appsList+')';\n  export default async function () {\n  const result = await rumUserSessionsClient.getUsqlResultAsTable({query: query, startTimestamp: startShiftTime, endTimestamp: endTime});\n  if ((result[\"values\"][0][0] + (result[\"values\"][0][1]/2))/(result[\"values\"][0][0] + result[\"values\"][0][1] + result[\"values\"][0][2]) > (result[\"values\"][0][3] + (result[\"values\"][0][4]/2))/(result[\"values\"][0][3] + result[\"values\"][0][4] + result[\"values\"][0][5])) \n   return \"🟢\";\n  else if ((result[\"values\"][0][0] + (result[\"values\"][0][1]/2))/(result[\"values\"][0][0] + result[\"values\"][0][1] + result[\"values\"][0][2]) < (result[\"values\"][0][3] + (result[\"values\"][0][4]/2))/(result[\"values\"][0][3] + result[\"values\"][0][4] + result[\"values\"][0][5]))\n   return \"🔴\";\n  else\n   return \"🟡\";\n}","visualization":"singleValue","visualizationSettings":{"thresholds":[],"chartSettings":{"gapPolicy":"connect","categoricalBarChartSettings":{}},"singleValue":{"showLabel":false,"label":"","autoscale":true,"recordField":"element"},"table":{"enableLineWrap":true,"hiddenColumns":[],"lineWrapIds":[]}}},"26":{"type":"code","title":"Avg $KPI","input":"import { rumUserSessionsClient } from \"@dynatrace-sdk/client-classic-environment-v1\";\nexport default async function () {\n  const metric = $KPI;\n  const metricAgg = \"avg\";\n  const last30Days = (Math.round(new Date().getTime() / 1000)- (720 * 3600))*1000;\n  var chartInterval = \"30m\"\n  var appsList = \"\\\"\"+$AppName[0]+\"\\\"\";\n  let i = 1;\n  // Build Apps List\n  while (i < 10) {\n    if ($AppName[i]==null) break;\n    appsList = appsList+\",\\\"\"+$AppName[i]+\"\\\"\";\n    i++;\n  }\n  var typeList = \"\\\"\"+$ActionType[0]+\"\\\"\";\n  let t = 1;\n  // Build Type List\n  while (t < 3) {\n    if ($ActionType[t]==null) break;\n    typeList = typeList+\",\\\"\"+$ActionType[t]+\"\\\"\";\n    t++;\n  }\n  var usqlQuery = 'SELECT DISTINCT DATETIME(endTime,  \"MM-dd HH:mm:ss\",\"'+chartInterval+'\") AS \"Date\", count(*) AS \"Count\", '+metricAgg+'('+metric+') AS \"Metric\" from useraction WHERE useraction.type in ('+typeList+') and useraction.application in ('+appsList+') limit 5000';\n  if ($ActionCategory==\"Key\") usqlQuery = 'SELECT DISTINCT DATETIME(endTime,  \"MM-dd HH:mm:ss\",\"'+chartInterval+'\") AS \"Date\", count(*) AS \"Count\", '+metricAgg+'('+metric+') AS \"Metric\" from useraction WHERE useraction.type in ('+typeList+') and useraction.application in ('+appsList+') and keyuseraction is true limit 5000';\n  if ($ActionCategory==\"Entry\") usqlQuery = 'SELECT DISTINCT DATETIME(endTime,  \"MM-dd HH:mm:ss\",\"'+chartInterval+'\") AS \"Date\", count(*) AS \"Count\", '+metricAgg+'('+metric+') AS \"Metric\" from useraction WHERE useraction.type in ('+typeList+') and useraction.application in ('+appsList+') and isentryaction is true  limit 5000';\n  if ($ActionCategory==\"Exit\") usqlQuery = 'SELECT DISTINCT DATETIME(endTime,  \"MM-dd HH:mm:ss\",\"'+chartInterval+'\") AS \"Date\", count(*) AS \"Count\", '+metricAgg+'('+metric+') AS \"Metric\" from useraction WHERE useraction.type in ('+typeList+') and useraction.application in ('+appsList+') and isexitaction is true limit 5000';\n  const response = await  rumUserSessionsClient.getUsqlResultAsTable({ query: usqlQuery,offsetUtc: -300,startTimestamp:last30Days });\n  if (response.values.length<6) return \"Try increasing the timeframe.\";\n  const sampleCount = response.values.length-6;\n  let ChangeMetric = 0;\n  let percentChangeTraffic = 0;\n  let trafficAVG = 0;\n  let metricAVG = 0;\n  let metricMIN = response.values[0][2];\n  let metricAAVG = 0;\n  let metricBAVG = 0;\n  let trafficAAVG = 0;\n  let trafficBAVG = 0;\n  let c = 0;\n  while (c < sampleCount) {\n    trafficAVG = trafficAVG + response.values[c][1];\n    metricAVG = metricAVG + response.values[c][2];\n    if (response.values[c][2]<metricMIN) metricMIN=response.values[c][2];\n    c++;\n  }\n  let i2 = 0;\n  let i2A = 0;\n  let i2B = 0;\n    while (i2 < sampleCount) {\n          if (response.values[i2][1]>(trafficAVG/sampleCount))\n            {\n              if (response.values[i2][2]!=null)\n                {\n              metricAAVG=metricAAVG+response.values[i2][2];\n              trafficAAVG=trafficAAVG+response.values[i2][1];\n              i2A++;\n                  }\n            }\n          if (response.values[i2][1]<(trafficAVG/sampleCount)) \n            {\n              if (response.values[i2][2]!=null)\n                {\n              metricBAVG=metricBAVG+response.values[i2][2];\n              trafficBAVG=trafficBAVG+response.values[i2][1];\n              i2B++;\n                  }\n            }\n          i2++;\n        }\n  if ((metricAVG/sampleCount)>=12000) \n   return \"🔴\";\n  else if ((metricAVG/sampleCount)>=3000) \n   return \"🟡\";\n  else\n   return \"🟢\";\n }","visualization":"singleValue","visualizationSettings":{"thresholds":[],"chartSettings":{"gapPolicy":"connect","categoricalBarChartSettings":{}},"singleValue":{"showLabel":false,"label":"","autoscale":true,"recordField":"element"},"table":{"enableLineWrap":true,"hiddenColumns":[],"lineWrapIds":[]}}},"27":{"type":"code","title":"Requests Trend","input":"import { rumUserSessionsClient } from '@dynatrace-sdk/client-classic-environment-v1';\nexport default async function () {\n  const startTime = Date.parse($dt_timeframe_from).toString();  // Get Dashboard Start Time\n  const endTime = Date.parse($dt_timeframe_to).toString();      // Get Dashboard End Time\n  const startShiftTime = startTime-(86400000*$TimeShift);       // Get TimeShift variable, convert to days and create startShift\n  const endShiftTime = endTime-(86400000*$TimeShift);           // Get TimeShift variable, convert to days and create endShift\n  var appsList = \"\\\"\"+$AppName[0]+\"\\\"\";\n  let i = 1;\n  // Build Apps List\n  while (i < 10) {\n    if ($AppName[i]==null) break;\n    appsList = appsList+\",\\\"\"+$AppName[i]+\"\\\"\";\n    i++;\n  }\n  var typeList = \"\\\"\"+$ActionType[0]+\"\\\"\";\n  let t = 1;\n  // Build Type List\n  while (t < 3) {\n    if ($ActionType[t]==null) break;\n    typeList = typeList+\",\\\"\"+$ActionType[t]+\"\\\"\";\n    t++;\n  }\n  // Create the USQL query string using the values above\n    const query = 'SELECT CONDITION (count(*),WHERE starttime>='+startTime+' and endtime<='+endTime+'), CONDITION (count(*),WHERE starttime>='+startShiftTime+' and endtime<='+endShiftTime+') from useraction where useraction.type in ('+typeList+') and useraction.application in ('+appsList+')';\n  // Fire off the USQL query and get the results\n  const result = await rumUserSessionsClient.getUsqlResultAsTable({query: query, startTimestamp: startShiftTime, endTimestamp: endTime});\n  if ((result[\"values\"][0][0])>(result[\"values\"][0][1])) \n   return \"🟢\";\n  else if ((result[\"values\"][0][0])<(result[\"values\"][0][1])) \n   return \"🔴\";\n  else\n   return \"🟡\";\n}","visualization":"singleValue","visualizationSettings":{"thresholds":[],"chartSettings":{"gapPolicy":"connect","categoricalBarChartSettings":{}},"singleValue":{"showLabel":false,"label":"","autoscale":true,"recordField":"element"},"table":{"enableLineWrap":true,"hiddenColumns":[],"lineWrapIds":[]}}},"28":{"type":"code","title":"Sessions Trend","input":"import { rumUserSessionsClient } from '@dynatrace-sdk/client-classic-environment-v1';\nexport default async function () {\n  const startTime = Date.parse($dt_timeframe_from).toString();  // Get Dashboard Start Time\n  const endTime = Date.parse($dt_timeframe_to).toString();      // Get Dashboard End Time\n  const startShiftTime = startTime-(86400000*$TimeShift);       // Get TimeShift variable, convert to days and create startShift\n  const endShiftTime = endTime-(86400000*$TimeShift);           // Get TimeShift variable, convert to days and create endShift\n  var appsList = \"\\\"\"+$AppName[0]+\"\\\"\";\n  let i = 1;\n  // Build Apps List\n  while (i < 10) {\n    if ($AppName[i]==null) break;\n    appsList = appsList+\",\\\"\"+$AppName[i]+\"\\\"\";\n    i++;\n  }\n  // Create the USQL query string using the values above\n    const query = 'SELECT CONDITION (count(*),WHERE starttime>='+startTime+' and endtime<='+endTime+'), CONDITION (count(*),WHERE starttime>='+startShiftTime+' and endtime<='+endShiftTime+') from usersession where useraction.application in ('+appsList+')';\n  // Fire off the USQL query and get the results\n  const result = await rumUserSessionsClient.getUsqlResultAsTable({query: query, startTimestamp: startShiftTime, endTimestamp: endTime});\n  if ((result[\"values\"][0][0])>(result[\"values\"][0][1])) \n   return \"🟢\";\n  else if ((result[\"values\"][0][0])<(result[\"values\"][0][1])) \n   return \"🔴\";\n  else\n   return \"🟡\";\n}","visualization":"singleValue","visualizationSettings":{"thresholds":[],"chartSettings":{"gapPolicy":"connect"},"singleValue":{"showLabel":false,"label":"","autoscale":true,"recordField":"element"},"table":{"enableLineWrap":true,"hiddenColumns":[],"lineWrapIds":[]}}},"29":{"type":"code","title":"Max $KPI","input":"import { rumUserSessionsClient } from \"@dynatrace-sdk/client-classic-environment-v1\";\nexport default async function () {\n  const metric = $KPI;\n  const metricAgg = \"avg\";\n  const last30Days = (Math.round(new Date().getTime() / 1000)- (720 * 3600))*1000;\n  var chartInterval = \"30m\"\n  var appsList = \"\\\"\"+$AppName[0]+\"\\\"\";\n  let i = 1;\n  // Build Apps List\n  while (i < 10) {\n    if ($AppName[i]==null) break;\n    appsList = appsList+\",\\\"\"+$AppName[i]+\"\\\"\";\n    i++;\n  }\n  var typeList = \"\\\"\"+$ActionType[0]+\"\\\"\";\n  let t = 1;\n  // Build Type List\n  while (t < 3) {\n    if ($ActionType[t]==null) break;\n    typeList = typeList+\",\\\"\"+$ActionType[t]+\"\\\"\";\n    t++;\n  }\n  var usqlQuery = 'SELECT DISTINCT DATETIME(endTime,  \"MM-dd HH:mm:ss\",\"'+chartInterval+'\") AS \"Date\", count(*) AS \"Count\", '+metricAgg+'('+metric+') AS \"Metric\" from useraction WHERE useraction.type in ('+typeList+') and useraction.application in ('+appsList+') limit 5000';\n  if ($ActionCategory==\"Key\") usqlQuery = 'SELECT DISTINCT DATETIME(endTime,  \"MM-dd HH:mm:ss\",\"'+chartInterval+'\") AS \"Date\", count(*) AS \"Count\", '+metricAgg+'('+metric+') AS \"Metric\" from useraction WHERE useraction.type in ('+typeList+') and useraction.application in ('+appsList+') and keyuseraction is true limit 5000';\n  if ($ActionCategory==\"Entry\") usqlQuery = 'SELECT DISTINCT DATETIME(endTime,  \"MM-dd HH:mm:ss\",\"'+chartInterval+'\") AS \"Date\", count(*) AS \"Count\", '+metricAgg+'('+metric+') AS \"Metric\" from useraction WHERE useraction.type in ('+typeList+') and useraction.application in ('+appsList+') and isentryaction is true  limit 5000';\n  if ($ActionCategory==\"Exit\") usqlQuery = 'SELECT DISTINCT DATETIME(endTime,  \"MM-dd HH:mm:ss\",\"'+chartInterval+'\") AS \"Date\", count(*) AS \"Count\", '+metricAgg+'('+metric+') AS \"Metric\" from useraction WHERE useraction.type in ('+typeList+') and useraction.application in ('+appsList+') and isexitaction is true limit 5000';\n  const response = await  rumUserSessionsClient.getUsqlResultAsTable({ query: usqlQuery,offsetUtc: -300,startTimestamp:last30Days });\n  if (response.values.length<6) return \"Try increasing the timeframe.\";\n  const sampleCount = response.values.length-6;\n  let metricAVG = 0;\n  let metricMIN = response.values[0][2];\n  let metricMAX = response.values[0][2];\n  let c = 0;\n  while (c < sampleCount) {\n    metricAVG = metricAVG + response.values[c][2];\n    if (response.values[c][2]<metricMIN) metricMIN=response.values[c][2];\n    if (response.values[c][2]>metricMAX) metricMAX=response.values[c][2];\n    c++;\n  }\n  if (metricMAX>=12000) \n   return \"🔴\";\n  else if (metricMAX>=3000) \n   return \"🟡\";\n  else\n   return \"🟢\";\n}","visualization":"singleValue","visualizationSettings":{"thresholds":[{"id":1,"field":"element","title":"","isEnabled":true,"rules":[{"id":0,"color":{"Default":"var(--dt-colors-charts-categorical-color-09-default, #649438)"},"comparator":"≥","label":""},{"id":1,"color":{"Default":"var(--dt-colors-charts-categorical-color-14-default, #d56b1a)"},"comparator":"≥","label":""},{"id":2,"color":{"Default":"var(--dt-colors-charts-categorical-color-12-default, #cd3741)"},"comparator":"≥","label":""}]}],"chartSettings":{"gapPolicy":"connect","categoricalBarChartSettings":{}},"singleValue":{"showLabel":false,"label":"","autoscale":true,"recordField":"element"},"table":{"enableLineWrap":true,"hiddenColumns":[],"lineWrapIds":[]},"unitsOverrides":[{"identifier":"element","unitCategory":"time","baseUnit":"millisecond","displayUnit":null,"decimals":2,"suffix":"","delimiter":false,"added":1708618424986}]}},"30":{"type":"code","title":"Min $KPI","input":"import { rumUserSessionsClient } from \"@dynatrace-sdk/client-classic-environment-v1\";\nexport default async function () {\n  const metric = $KPI;\n  const metricAgg = \"avg\";\n  const last30Days = (Math.round(new Date().getTime() / 1000)- (720 * 3600))*1000;\n  var chartInterval = \"30m\"\n  var appsList = \"\\\"\"+$AppName[0]+\"\\\"\";\n  let i = 1;\n  // Build Apps List\n  while (i < 10) {\n    if ($AppName[i]==null) break;\n    appsList = appsList+\",\\\"\"+$AppName[i]+\"\\\"\";\n    i++;\n  }\n  var typeList = \"\\\"\"+$ActionType[0]+\"\\\"\";\n  let t = 1;\n  // Build Type List\n  while (t < 3) {\n    if ($ActionType[t]==null) break;\n    typeList = typeList+\",\\\"\"+$ActionType[t]+\"\\\"\";\n    t++;\n  }\n  var usqlQuery = 'SELECT DISTINCT DATETIME(endTime,  \"MM-dd HH:mm:ss\",\"'+chartInterval+'\") AS \"Date\", count(*) AS \"Count\", '+metricAgg+'('+metric+') AS \"Metric\" from useraction WHERE useraction.type in ('+typeList+') and useraction.application in ('+appsList+') limit 5000';\n  if ($ActionCategory==\"Key\") usqlQuery = 'SELECT DISTINCT DATETIME(endTime,  \"MM-dd HH:mm:ss\",\"'+chartInterval+'\") AS \"Date\", count(*) AS \"Count\", '+metricAgg+'('+metric+') AS \"Metric\" from useraction WHERE useraction.type in ('+typeList+') and useraction.application in ('+appsList+') and keyuseraction is true limit 5000';\n  if ($ActionCategory==\"Entry\") usqlQuery = 'SELECT DISTINCT DATETIME(endTime,  \"MM-dd HH:mm:ss\",\"'+chartInterval+'\") AS \"Date\", count(*) AS \"Count\", '+metricAgg+'('+metric+') AS \"Metric\" from useraction WHERE useraction.type in ('+typeList+') and useraction.application in ('+appsList+') and isentryaction is true  limit 5000';\n  if ($ActionCategory==\"Exit\") usqlQuery = 'SELECT DISTINCT DATETIME(endTime,  \"MM-dd HH:mm:ss\",\"'+chartInterval+'\") AS \"Date\", count(*) AS \"Count\", '+metricAgg+'('+metric+') AS \"Metric\" from useraction WHERE useraction.type in ('+typeList+') and useraction.application in ('+appsList+') and isexitaction is true limit 5000';\n  const response = await  rumUserSessionsClient.getUsqlResultAsTable({ query: usqlQuery,offsetUtc: -300,startTimestamp:last30Days });\n  if (response.values.length<6) return \"Try increasing the timeframe.\";\n  const sampleCount = response.values.length-6;\n  let metricAVG = 0;\n  let metricMIN = response.values[0][2];\n  let metricMAX = response.values[0][2];\n  let c = 0;\n  while (c < sampleCount) {\n    metricAVG = metricAVG + response.values[c][2];\n    if (response.values[c][2]<metricMIN) metricMIN=response.values[c][2];\n    if (response.values[c][2]>metricMAX) metricMAX=response.values[c][2];\n    c++;\n  }\n  if (metricMIN>=12000) \n   return \"🔴\";\n  else if (metricMIN>=3000) \n   return \"🟡\";\n  else\n   return \"🟢\";\n}","visualization":"singleValue","visualizationSettings":{"thresholds":[{"id":1,"field":"element","title":"","isEnabled":true,"rules":[{"id":0,"color":{"Default":"var(--dt-colors-charts-categorical-color-09-default, #649438)"},"comparator":"≥","label":""},{"id":1,"color":{"Default":"var(--dt-colors-charts-categorical-color-14-default, #d56b1a)"},"comparator":"≥","label":""},{"id":2,"color":{"Default":"var(--dt-colors-charts-categorical-color-12-default, #cd3741)"},"comparator":"≥","label":""}]}],"chartSettings":{"gapPolicy":"connect","categoricalBarChartSettings":{}},"singleValue":{"showLabel":false,"label":"","autoscale":true,"recordField":"element"},"table":{"enableLineWrap":true,"hiddenColumns":[],"lineWrapIds":[]},"unitsOverrides":[{"identifier":"element","unitCategory":"time","baseUnit":"millisecond","displayUnit":null,"decimals":2,"suffix":"","delimiter":false,"added":1708618424986}]}},"33":{"type":"markdown","title":"","content":"![](data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAABy8AAAAMCAYAAADbJPG3AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAAEnQAABJ0Ad5mH3gAAACdSURBVHhe7dtBFcAgDETBUBtFA6KrDhf0gofsYeay8fBfRn37FAAAAAAAAECz5y4AAAAAAABAK/ESAAAAAAAAiCBeAgAAAAAAABHESwAAAAAAACCCeAkAAAAAAABEEC8BAAAAAACACOIlAAAAAAAAEGG8c517AwAAAAAAALTxeQkAAAAAAABEEC8BAAAAAACACOIlAAAAAAAAEKDqB2IIBAQ2TEouAAAAAElFTkSuQmCC)"},"36":{"type":"code","title":"$KPI SLO","input":"import { rumUserSessionsClient } from \"@dynatrace-sdk/client-classic-environment-v1\";\nexport default async function () {\n  const startTime = Date.parse($dt_timeframe_from).toString();  // Get Dashboard Start Time\n  const endTime = Date.parse($dt_timeframe_to).toString();      // Get Dashboard End Time\n  var appsList = \"\\\"\"+$AppName[0]+\"\\\"\";\n  let i = 1;\n  // Build Apps List\n  while (i < 10) {\n    if ($AppName[i]==null) break;\n    appsList = appsList+\",\\\"\"+$AppName[i]+\"\\\"\";\n    i++;\n  }\n  var typeList = \"\\\"\"+$ActionType[0]+\"\\\"\";\n  let t = 1;\n  // Build Type List\n  while (t < 3) {\n    if ($ActionType[t]==null) break;\n    typeList = typeList+\",\\\"\"+$ActionType[t]+\"\\\"\";\n    t++;\n  }\n  // Calculate Chart Interval\n  const timeDiff = (endTime-startTime)/3600/1000/24;\n  var chartInterval = \"5m\"\n  if (timeDiff>.5)\n    var chartInterval = \"10m\"\n  if (timeDiff>1)\n    var chartInterval = \"1h\"\n  var query = 'SELECT DISTINCT DATETIME(endTime,  \"MM-dd HH:mm:ss\",\"'+chartInterval+'\") AS \"Date\",CONDITION(count(*), WHERE duration<=('+$SLO+'*1000)) AS \"Success Count\",CONDITION(count(*), WHERE duration>('+$SLO+'*900) and duration<=('+$SLO+'*1000)) AS \"Warn Count\",CONDITION(count(*), WHERE duration>('+$SLO+'*1000)) AS \"Breach Count\" from useraction WHERE useraction.type in ('+typeList+') and useraction.application in ('+appsList+') limit 5000';\n  if ($ActionCategory==\"Key\") query = 'SELECT DISTINCT DATETIME(endTime,  \"MM-dd HH:mm:ss\",\"'+chartInterval+'\") AS \"Date\",CONDITION(count(*), WHERE duration<=('+$SLO+'*1000)) AS \"Success Count\",CONDITION(count(*), WHERE duration>('+$SLO+'*900) and duration<=('+$SLO+'*1000)) AS \"Warn Count\",CONDITION(count(*), WHERE duration>('+$SLO+'*1000)) AS \"Breach Count\" from useraction WHERE useraction.type in ('+typeList+') and useraction.application in ('+appsList+') and keyuseraction is true limit 5000';\n  if ($ActionCategory==\"Entry\") query = 'SELECT DISTINCT DATETIME(endTime,  \"MM-dd HH:mm:ss\",\"'+chartInterval+'\") AS \"Date\",CONDITION(count(*), WHERE duration<=('+$SLO+'*1000)) AS \"Success Count\",CONDITION(count(*), WHERE duration>('+$SLO+'*900) and duration<=('+$SLO+'*1000)) AS \"Warn Count\",CONDITION(count(*), WHERE duration>('+$SLO+'*1000)) AS \"Breach Count\" from useraction WHERE useraction.type in ('+typeList+') and useraction.application in ('+appsList+') and isentryaction is true limit 5000';\n  if ($ActionCategory==\"Exit\") query = 'SELECT DISTINCT DATETIME(endTime,  \"MM-dd HH:mm:ss\",\"'+chartInterval+'\") AS \"Date\",CONDITION(count(*), WHERE duration<=('+$SLO+'*1000)) AS \"Success Count\",CONDITION(count(*), WHERE duration>('+$SLO+'*900) and duration<=('+$SLO+'*1000)) AS \"Warn Count\",CONDITION(count(*), WHERE duration>('+$SLO+'*1000)) AS \"Breach Count\" from useraction WHERE useraction.type in ('+typeList+') and useraction.application in ('+appsList+') and isexitaction is true limit 5000';\n  const response = await rumUserSessionsClient.getUsqlResultAsTable({query: query, startTimestamp: startTime, endTimestamp: endTime});\n  const sampleCount = response.values.length;\n  return {\n    records: new Array(sampleCount).fill(null).map((_, index, array) => {\n      return {\n        Date: response.values[index][0],\n        'SLO Success': response.values[index][1],\n        'SLO Warning': response.values[index][2],\n        'SLO Failure': response.values[index][3]\n      };\n    }),\n    types: [\n      {\n        indexRange: [0, sampleCount],\n        mappings: {\n         Date: { type: 'timestamp' },\n          'SLO Success': { type: 'double' },\n          'SLO Warning': { type: 'double' },\n          'SLO Failure': { type: 'double' }\n        },\n      },\n    ],\n  };\n}","visualization":"areaChart","visualizationSettings":{"thresholds":[{"id":1,"field":"","title":"","isEnabled":true,"rules":[{"id":0,"color":{"Default":"var(--dt-colors-charts-categorical-color-09-default, #649438)"},"comparator":"≥","label":""},{"id":1,"color":{"Default":"var(--dt-colors-charts-categorical-color-14-default, #d56b1a)"},"comparator":"≥","label":""},{"id":2,"color":{"Default":"var(--dt-colors-charts-categorical-color-12-default, #cd3741)"},"comparator":"≥","label":""}]}],"chartSettings":{"gapPolicy":"connect","legend":{"position":"bottom","hidden":false},"seriesOverrides":[{"seriesId":["SLO Failure"],"override":{"color":"#F8312F"}},{"seriesId":["SLO Warning"],"override":{"color":"#FCD53F"}},{"seriesId":["SLO Success"],"override":{"color":"#00D26A"}}],"categoricalBarChartSettings":{}},"singleValue":{"showLabel":true,"label":"","autoscale":true,"recordField":"Date"},"table":{"enableLineWrap":true,"hiddenColumns":[],"lineWrapIds":[]},"unitsOverrides":[]}},"37":{"type":"code","title":"SLO Failure","input":"import { rumUserSessionsClient } from \"@dynatrace-sdk/client-classic-environment-v1\";\nexport default async function () {\n  const metric = $KPI;\n  const metricAgg = \"avg\";\n  const last30Days = (Math.round(new Date().getTime() / 1000)- (720 * 3600))*1000;\n  var chartInterval = \"30m\"\n  var appsList = \"\\\"\"+$AppName[0]+\"\\\"\";\n  let i = 1;\n  // Build Apps List\n  while (i < 10) {\n    if ($AppName[i]==null) break;\n    appsList = appsList+\",\\\"\"+$AppName[i]+\"\\\"\";\n    i++;\n  }\n  var typeList = \"\\\"\"+$ActionType[0]+\"\\\"\";\n  let t = 1;\n  // Build Type List\n  while (t < 3) {\n    if ($ActionType[t]==null) break;\n    typeList = typeList+\",\\\"\"+$ActionType[t]+\"\\\"\";\n    t++;\n  }\n  var usqlQuery = 'SELECT CONDITION(count(*), WHERE duration>('+$SLO+'*1000)) AS \"Breach Count\",CONDITION(count(*), WHERE duration<=('+$SLO+'*1000)) AS \"Success Count\",CONDITION(count(*), WHERE duration>('+$SLO+'*900) and duration<=('+$SLO+'*1000)) AS \"Warn Count\" from useraction WHERE useraction.type in ('+typeList+') and useraction.application in ('+appsList+') limit 5000';\n  if ($ActionCategory==\"Key\") usqlQuery = 'SELECT CONDITION(count(*), WHERE duration>('+$SLO+'*1000)) AS \"Breach Count\",CONDITION(count(*), WHERE duration<=('+$SLO+'*1000)) AS \"Success Count\",CONDITION(count(*), WHERE duration>('+$SLO+'*900) and duration<=('+$SLO+'*1000)) AS \"Warn Count\" from useraction WHERE useraction.type in ('+typeList+') and useraction.application in ('+appsList+') and keyuseraction is true limit 5000';\n  if ($ActionCategory==\"Entry\") usqlQuery = 'SELECT CONDITION(count(*), WHERE duration>('+$SLO+'*1000)) AS \"Breach Count\",CONDITION(count(*), WHERE duration<=('+$SLO+'*1000)) AS \"Success Count\",CONDITION(count(*), WHERE duration>('+$SLO+'*900) and duration<=('+$SLO+'*1000)) AS \"Warn Count\" from useraction WHERE useraction.type in ('+typeList+') and useraction.application in ('+appsList+') and isentryaction is true  limit 5000';\n  if ($ActionCategory==\"Exit\") usqlQuery = 'SELECT CONDITION(count(*), WHERE duration>('+$SLO+'*1000)) AS \"Breach Count\",CONDITION(count(*), WHERE duration<=('+$SLO+'*1000)) AS \"Success Count\",CONDITION(count(*), WHERE duration>('+$SLO+'*900) and duration<=('+$SLO+'*1000)) AS \"Warn Count\" from useraction WHERE useraction.type in ('+typeList+') and useraction.application in ('+appsList+') and isexitaction is true limit 5000';\n  const response = await  rumUserSessionsClient.getUsqlResultAsTable({ query: usqlQuery,offsetUtc: -300,startTimestamp:last30Days });\n  return (response.values[0][0]/(response.values[0][0]+response.values[0][1]+response.values[0][2]))*100;\n}","visualization":"singleValue","visualizationSettings":{"thresholds":[{"id":1,"field":"element","title":"","isEnabled":true,"rules":[{"id":2,"color":"#F8312F","comparator":"≥","label":"","value":0}]}],"chartSettings":{"gapPolicy":"connect","circleChartSettings":{"groupingThresholdType":"relative","groupingThresholdValue":0,"valueType":"relative"},"categoryOverrides":{},"categoricalBarChartSettings":{}},"singleValue":{"showLabel":false,"label":"","prefixIcon":"","autoscale":true,"alignment":"center","trend":{"isVisible":false},"sparklineSettings":{"isVisible":false},"colorThresholdTarget":"value","recordField":"element"},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"lineWrapIds":[],"columnWidths":{}},"unitsOverrides":[{"identifier":"element","unitCategory":"percentage","baseUnit":"percent","displayUnit":null,"decimals":2,"suffix":"","delimiter":false,"added":1701281148734}]}},"38":{"type":"code","title":"SLO Success","input":"import { rumUserSessionsClient } from \"@dynatrace-sdk/client-classic-environment-v1\";\nexport default async function () {\n  const metric = $KPI;\n  const metricAgg = \"avg\";\n  const last30Days = (Math.round(new Date().getTime() / 1000)- (720 * 3600))*1000;\n  var chartInterval = \"30m\"\n  var appsList = \"\\\"\"+$AppName[0]+\"\\\"\";\n  let i = 1;\n  // Build Apps List\n  while (i < 10) {\n    if ($AppName[i]==null) break;\n    appsList = appsList+\",\\\"\"+$AppName[i]+\"\\\"\";\n    i++;\n  }\n  var typeList = \"\\\"\"+$ActionType[0]+\"\\\"\";\n  let t = 1;\n  // Build Type List\n  while (t < 3) {\n    if ($ActionType[t]==null) break;\n    typeList = typeList+\",\\\"\"+$ActionType[t]+\"\\\"\";\n    t++;\n  }\n  var usqlQuery = 'SELECT CONDITION(count(*), WHERE duration>('+$SLO+'*1000)) AS \"Breach Count\",CONDITION(count(*), WHERE duration<=('+$SLO+'*1000)) AS \"Success Count\",CONDITION(count(*), WHERE duration>('+$SLO+'*900) and duration<=('+$SLO+'*1000)) AS \"Warn Count\" from useraction WHERE useraction.type in ('+typeList+') and useraction.application in ('+appsList+') limit 5000';\n  if ($ActionCategory==\"Key\") usqlQuery = 'SELECT CONDITION(count(*), WHERE duration>('+$SLO+'*1000)) AS \"Breach Count\",CONDITION(count(*), WHERE duration<=('+$SLO+'*1000)) AS \"Success Count\",CONDITION(count(*), WHERE duration>('+$SLO+'*900) and duration<=('+$SLO+'*1000)) AS \"Warn Count\" from useraction WHERE useraction.type in ('+typeList+') and useraction.application in ('+appsList+') and keyuseraction is true limit 5000';\n  if ($ActionCategory==\"Entry\") usqlQuery = 'SELECT CONDITION(count(*), WHERE duration>('+$SLO+'*1000)) AS \"Breach Count\",CONDITION(count(*), WHERE duration<=('+$SLO+'*1000)) AS \"Success Count\",CONDITION(count(*), WHERE duration>('+$SLO+'*900) and duration<=('+$SLO+'*1000)) AS \"Warn Count\" from useraction WHERE useraction.type in ('+typeList+') and useraction.application in ('+appsList+') and isentryaction is true  limit 5000';\n  if ($ActionCategory==\"Exit\") usqlQuery = 'SELECT CONDITION(count(*), WHERE duration>('+$SLO+'*1000)) AS \"Breach Count\",CONDITION(count(*), WHERE duration<=('+$SLO+'*1000)) AS \"Success Count\",CONDITION(count(*), WHERE duration>('+$SLO+'*900) and duration<=('+$SLO+'*1000)) AS \"Warn Count\" from useraction WHERE useraction.type in ('+typeList+') and useraction.application in ('+appsList+') and isexitaction is true limit 5000';\n  const response = await  rumUserSessionsClient.getUsqlResultAsTable({ query: usqlQuery,offsetUtc: -300,startTimestamp:last30Days });\n  return (response.values[0][1]/(response.values[0][0]+response.values[0][1]+response.values[0][2]))*100;\n}","visualization":"singleValue","visualizationSettings":{"thresholds":[{"id":1,"field":"element","title":"","isEnabled":true,"rules":[{"id":0,"color":"#00D26A","comparator":"≥","label":"","value":0}]}],"chartSettings":{"gapPolicy":"connect","circleChartSettings":{"groupingThresholdType":"relative","groupingThresholdValue":0,"valueType":"relative"},"categoryOverrides":{},"categoricalBarChartSettings":{}},"singleValue":{"showLabel":false,"label":"","prefixIcon":"","autoscale":true,"alignment":"center","trend":{"isVisible":false},"sparklineSettings":{"isVisible":false},"colorThresholdTarget":"value","recordField":"element"},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"lineWrapIds":[],"columnWidths":{}},"unitsOverrides":[{"identifier":"element","unitCategory":"percentage","baseUnit":"percent","displayUnit":null,"decimals":2,"suffix":"","delimiter":false,"added":1701281148734}]}},"39":{"type":"code","title":"SLO Warning","input":"import { rumUserSessionsClient } from \"@dynatrace-sdk/client-classic-environment-v1\";\nexport default async function () {\n  const metric = $KPI;\n  const metricAgg = \"avg\";\n  const last30Days = (Math.round(new Date().getTime() / 1000)- (720 * 3600))*1000;\n  var chartInterval = \"30m\"\n  var appsList = \"\\\"\"+$AppName[0]+\"\\\"\";\n  let i = 1;\n  // Build Apps List\n  while (i < 10) {\n    if ($AppName[i]==null) break;\n    appsList = appsList+\",\\\"\"+$AppName[i]+\"\\\"\";\n    i++;\n  }\n  var typeList = \"\\\"\"+$ActionType[0]+\"\\\"\";\n  let t = 1;\n  // Build Type List\n  while (t < 3) {\n    if ($ActionType[t]==null) break;\n    typeList = typeList+\",\\\"\"+$ActionType[t]+\"\\\"\";\n    t++;\n  }\n  var usqlQuery = 'SELECT CONDITION(count(*), WHERE duration>('+$SLO+'*1000)) AS \"Breach Count\",CONDITION(count(*), WHERE duration<=('+$SLO+'*1000)) AS \"Success Count\",CONDITION(count(*), WHERE duration>('+$SLO+'*900) and duration<=('+$SLO+'*1000)) AS \"Warn Count\" from useraction WHERE useraction.type in ('+typeList+') and useraction.application in ('+appsList+') limit 5000';\n  if ($ActionCategory==\"Key\") usqlQuery = 'SELECT CONDITION(count(*), WHERE duration>('+$SLO+'*1000)) AS \"Breach Count\",CONDITION(count(*), WHERE duration<=('+$SLO+'*1000)) AS \"Success Count\",CONDITION(count(*), WHERE duration>('+$SLO+'*900) and duration<=('+$SLO+'*1000)) AS \"Warn Count\" from useraction WHERE useraction.type in ('+typeList+') and useraction.application in ('+appsList+') and keyuseraction is true limit 5000';\n  if ($ActionCategory==\"Entry\") usqlQuery = 'SELECT CONDITION(count(*), WHERE duration>('+$SLO+'*1000)) AS \"Breach Count\",CONDITION(count(*), WHERE duration<=('+$SLO+'*1000)) AS \"Success Count\",CONDITION(count(*), WHERE duration>('+$SLO+'*900) and duration<=('+$SLO+'*1000)) AS \"Warn Count\" from useraction WHERE useraction.type in ('+typeList+') and useraction.application in ('+appsList+') and isentryaction is true  limit 5000';\n  if ($ActionCategory==\"Exit\") usqlQuery = 'SELECT CONDITION(count(*), WHERE duration>('+$SLO+'*1000)) AS \"Breach Count\",CONDITION(count(*), WHERE duration<=('+$SLO+'*1000)) AS \"Success Count\",CONDITION(count(*), WHERE duration>('+$SLO+'*900) and duration<=('+$SLO+'*1000)) AS \"Warn Count\" from useraction WHERE useraction.type in ('+typeList+') and useraction.application in ('+appsList+') and isexitaction is true limit 5000';\n  const response = await  rumUserSessionsClient.getUsqlResultAsTable({ query: usqlQuery,offsetUtc: -300,startTimestamp:last30Days });\n  return (response.values[0][2]/(response.values[0][0]+response.values[0][1]+response.values[0][2]))*100;\n}","visualization":"singleValue","visualizationSettings":{"thresholds":[{"id":1,"field":"element","title":"","isEnabled":true,"rules":[{"id":1,"color":"#FCD53F","comparator":"≥","label":"","value":0}]}],"chartSettings":{"gapPolicy":"connect","circleChartSettings":{"groupingThresholdType":"relative","groupingThresholdValue":0,"valueType":"relative"},"categoryOverrides":{},"categoricalBarChartSettings":{}},"singleValue":{"showLabel":false,"label":"","prefixIcon":"","autoscale":true,"alignment":"center","trend":{"isVisible":false},"sparklineSettings":{"isVisible":false},"colorThresholdTarget":"value","recordField":"element"},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"lineWrapIds":[],"columnWidths":{}},"unitsOverrides":[{"identifier":"element","unitCategory":"percentage","baseUnit":"percent","displayUnit":null,"decimals":2,"suffix":"","delimiter":false,"added":1701281148734}]}},"40":{"type":"code","title":"Traffic vs $KPI","input":"import { rumUserSessionsClient } from \"@dynatrace-sdk/client-classic-environment-v1\";\nexport default async function () {\n  const startTime = Date.parse($dt_timeframe_from).toString();  // Get Dashboard Start Time\n  const endTime = Date.parse($dt_timeframe_to).toString();      // Get Dashboard End Time\n  var appsList = \"\\\"\"+$AppName[0]+\"\\\"\";\n  let i = 1;\n  // Build Apps List\n  while (i < 10) {\n    if ($AppName[i]==null) break;\n    appsList = appsList+\",\\\"\"+$AppName[i]+\"\\\"\";\n    i++;\n  }\n  var typeList = \"\\\"\"+$ActionType[0]+\"\\\"\";\n  let t = 1;\n  // Build Type List\n  while (t < 3) {\n    if ($ActionType[t]==null) break;\n    typeList = typeList+\",\\\"\"+$ActionType[t]+\"\\\"\";\n    t++;\n  }\n  // Calculate Chart Interval\n  const timeDiff = (endTime-startTime)/3600/1000/24;\n  var chartInterval = \"5m\"\n  if (timeDiff>.5)\n    var chartInterval = \"10m\"\n  if (timeDiff>1)\n    var chartInterval = \"1h\"\n  var query = 'SELECT DATETIME(endTime,  \"MM-dd HH:mm:ss\",\"1h\") AS \"Date\", count(*),avg(useraction.'+$KPI+') from useraction WHERE useraction.type in ('+typeList+') and useraction.application in ('+appsList+') GROUP BY  DATETIME(endTime,  \"MM-dd HH:mm:ss\",\"1h\") limit 5000';\n  if ($ActionCategory==\"Key\") query = 'SELECT DATETIME(endTime,  \"MM-dd HH:mm:ss\",\"1h\") AS \"Date\", count(*),avg(useraction.'+$KPI+') from useraction WHERE useraction.type in ('+typeList+') and useraction.application in ('+appsList+') and keyuseraction is true GROUP BY  DATETIME(endTime,  \"MM-dd HH:mm:ss\",\"1h\") limit 5000';\n  if ($ActionCategory==\"Entry\") query = 'SELECT DATETIME(endTime,  \"MM-dd HH:mm:ss\",\"1h\") AS \"Date\", count(*),avg(useraction.'+$KPI+') from useraction WHERE useraction.type in ('+typeList+') and useraction.application in ('+appsList+') and isentryaction is true GROUP BY  DATETIME(endTime,  \"MM-dd HH:mm:ss\",\"1h\") limit 5000';\n  if ($ActionCategory==\"Exit\") query = 'SELECT DATETIME(endTime,  \"MM-dd HH:mm:ss\",\"1h\") AS \"Date\", count(*),avg(useraction.'+$KPI+') from useraction WHERE useraction.type in ('+typeList+') and useraction.application in ('+appsList+') and isexitaction is true GROUP BY  DATETIME(endTime,  \"MM-dd HH:mm:ss\",\"1h\") limit 5000';\n  const response = await rumUserSessionsClient.getUsqlResultAsTable({query: query, startTimestamp: startTime, endTimestamp: endTime});\n  const sampleCount = response.values.length;\n  return {\n    records: new Array(sampleCount).fill(null).map((_, index, array) => {\n      return {\n        Date: response.values[index][0],\n        'Traffic': response.values[index][1],\n        'KPI': response.values[index][2]\n      };\n    }),\n    types: [\n      {\n        indexRange: [0, sampleCount],\n        mappings: {\n         Date: { type: 'timestamp' },\n          'Traffic': { type: 'double' },\n          'KPI': { type: 'double' }\n        },\n      },\n    ],\n  };\n}","visualization":"lineChart","visualizationSettings":{"thresholds":[],"chartSettings":{"gapPolicy":"connect","legend":{"position":"bottom","hidden":false},"seriesOverrides":[{"seriesId":["KPI"],"override":{"color":"#00D26A"}},{"seriesId":"Traffic","override":{"color":"#0096FF"}}],"categoricalBarChartSettings":{}},"singleValue":{"showLabel":true,"label":"","autoscale":true,"recordField":"Date"},"table":{"enableLineWrap":true,"hiddenColumns":[],"lineWrapIds":[]},"unitsOverrides":[{"identifier":"KPI","unitCategory":"time","baseUnit":"millisecond","displayUnit":null,"decimals":2,"suffix":"","delimiter":false,"added":1708629609749}]}},"41":{"type":"markdown","title":"","content":"## Last 30 Days"},"42":{"type":"markdown","title":"","content":"## Current Timeframe"},"43":{"type":"markdown","title":"","content":"![](data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAABy8AAAAMCAYAAADbJPG3AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAAEnQAABJ0Ad5mH3gAAACdSURBVHhe7dtBFcAgDETBUBtFA6KrDhf0gofsYeay8fBfRn37FAAAAAAAAECz5y4AAAAAAABAK/ESAAAAAAAAiCBeAgAAAAAAABHESwAAAAAAACCCeAkAAAAAAABEEC8BAAAAAACACOIlAAAAAAAAEGG8c517AwAAAAAAALTxeQkAAAAAAABEEC8BAAAAAACACOIlAAAAAAAAEKDqB2IIBAQ2TEouAAAAAElFTkSuQmCC)"}},"layouts":{"5":{"x":18,"y":5,"w":6,"h":2},"11":{"x":0,"y":0,"w":24,"h":1},"12":{"x":0,"y":3,"w":24,"h":1},"13":{"x":0,"y":1,"w":8,"h":2},"23":{"x":0,"y":5,"w":3,"h":2},"24":{"x":12,"y":5,"w":6,"h":2},"25":{"x":22,"y":1,"w":2,"h":2},"26":{"x":13,"y":1,"w":3,"h":2},"27":{"x":11,"y":1,"w":2,"h":2},"28":{"x":9,"y":1,"w":2,"h":2},"29":{"x":16,"y":1,"w":3,"h":2},"30":{"x":19,"y":1,"w":3,"h":2},"33":{"x":0,"y":7,"w":24,"h":1},"36":{"x":0,"y":9,"w":12,"h":7},"37":{"x":9,"y":5,"w":3,"h":2},"38":{"x":3,"y":5,"w":3,"h":2},"39":{"x":6,"y":5,"w":3,"h":2},"40":{"x":12,"y":9,"w":12,"h":7},"41":{"x":0,"y":4,"w":24,"h":1},"42":{"x":0,"y":8,"w":24,"h":1},"43":{"x":0,"y":16,"w":24,"h":1}}}